!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){},function(e,t,n){e.exports=n.p+"images/logo-play.png"},function(e,t,n){e.exports=n.p+"images/logo-negative.png"},function(e,t,n){"use strict";function o(e){let t=!1;window.addEventListener("scroll",n=>{t||window.requestAnimationFrame(()=>{e(),t=!1}),t=!0})}function i(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var r;n.r(t),function(e){e.CODE_AREA=".code-area",e.CONTENT="#d2v-content",e.CURRENT_SECTION_NAME="#current-section-name",e.TOP_HEADER="#d2v-header",e.NAVIGATION_MENU="#site-navigation"}(r||(r={}));class s{constructor(e,t){this._element=e,this._elementInMenu=this.getElementInMenu(t)}get isActive(){return this._element.getBoundingClientRect().top<=window.innerHeight/2}set classname(e){"active"===e?this._elementInMenuContainsActiveClass||this._elementInMenu.classList.add("active"):this._elementInMenuContainsActiveClass&&this._elementInMenu.classList.remove("active")}getElementInMenu(e){const t=document.querySelectorAll(`${r.NAVIGATION_MENU} > li > ul > li > a`);for(const e of t)if(e.getAttribute("href")==="#"+this._element.getAttribute("id"))return e}get _elementInMenuContainsActiveClass(){return void 0!==this._elementInMenu&&this._elementInMenu.classList.contains("active")}}class c{constructor(e,t){this.codeArea=e,this.kotlinEditor=t,this._hasBeenExecuted=!1}get hasNotBeenExecuted(){return!this._hasBeenExecuted}get isOnScreen(){return this.codeArea.getBoundingClientRect().bottom>=0&&this.codeArea.getBoundingClientRect().bottom<=window.innerHeight}execute(){return new Promise((e,t)=>{this._hasBeenExecuted=!0,this.kotlinEditor.execute(),e(),t(new Error("can't execute kotlin playground editor"))})}}class u{constructor(e){this.editors=[],this.setEditors(e),this.setListenerForEditorsAutoExecution()}setEditors(e){for(const t in e){const n=e[t],o=n.nodes[0].querySelector(r.CODE_AREA);null!==o?this.editors.push(new c(o,n)):console.error(`codeArea of ${t+1} kotlin editor`)}}setListenerForEditorsAutoExecution(){o(()=>{for(const e of this.editors)e.isOnScreen&&e.hasNotBeenExecuted&&e.execute()})}}const l=[];KotlinPlayground(".kotlin-code",{getInstance:e=>{l.push(e)}}).then(()=>{new u(l)}),function(e,t){const n=document.body,r=void 0===t?0:t.getBoundingClientRect().height;o(()=>{const t=parseInt(window.getComputedStyle(e).paddingTop)-r;i()>=t&&!n.classList.contains("menu-fixed")?n.classList.add("menu-fixed"):i()<=t&&n.classList.contains("menu-fixed")&&n.classList.remove("menu-fixed")})}(document.querySelector(r.CONTENT),document.querySelector(r.TOP_HEADER)),document.querySelector(r.CURRENT_SECTION_NAME).innerHTML=function(){const e=document.querySelector("h1");return null!==e?e.innerHTML:""}(),function(){const e=document.querySelectorAll(`${r.NAVIGATION_MENU} > li > a`),t=document.querySelector("h1");if(null!==t)for(const n of e)n.innerHTML===t.innerHTML&&n.classList.add("active")}(),new Promise((e,t)=>{const n=[],o=document.querySelectorAll(`${r.CONTENT} h2`),i=document.querySelector(`${r.NAVIGATION_MENU}`);for(const e of o)n.push(new s(e,i));e(n.reverse()),t(new Error("can't get list of level two in navigation menu"))}).then(e=>{o(()=>{!function(e){let t=!0;for(const n of e)n.isActive&&t?(t=!1,n.classname="active"):n.classname="unactive"}(e)})});n(0),n(1),n(2)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9sb2dvLXBsYXkucG5nIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvbG9nby1uZWdhdGl2ZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nZXRQYWdlU2Nyb2xsUG9zaXRpb25Ub3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvSFRNTF9TRUxFQ1RPUlMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvbmF2aWdhdGlvbk1lbnUvc2V0TmF2aWdhdGlvbk1lbnUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZWRpdG9yL0VkaXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lZGl0b3IvRDJWS290bGluRWRpdG9ycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lZGl0b3Ivc2V0RWRpdG9ycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tZW51UG9zaXRpb25PYnNlcnZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL25hdmlnYXRpb25NZW51L3NldEN1cnJlbnRTZWN0aW9uTmFtZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFkZFNjcm9sbEV2ZW50TGlzdGVuZXIiLCJmdW4iLCJ0aWNraW5nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wIiwidW5kZWZpbmVkIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImJvZHkiLCJwYXJlbnROb2RlIiwic2Nyb2xsVG9wIiwiSFRNTF9TRUxFQ1RPUlMiLCJzZXROYXZpZ2F0aW9uTWVudV9UaXRsZUxldmVsVHdvIiwiW29iamVjdCBPYmplY3RdIiwiZWxlbWVudCIsIm5hdmlnYXRpb25NZW51RWxlbWVudCIsInRoaXMiLCJfZWxlbWVudCIsIl9lbGVtZW50SW5NZW51IiwiZ2V0RWxlbWVudEluTWVudSIsImlzQWN0aXZlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiaW5uZXJIZWlnaHQiLCJjbGFzc25hbWUiLCJfZWxlbWVudEluTWVudUNvbnRhaW5zQWN0aXZlQ2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJsaXN0T2ZMZXZlbFR3b0luTWVudSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJOQVZJR0FUSU9OX01FTlUiLCJsZXZlbFR3b0VsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJjb250YWlucyIsIkVkaXRvciIsImNvZGVBcmVhIiwia290bGluRWRpdG9yIiwiX2hhc0JlZW5FeGVjdXRlZCIsImhhc05vdEJlZW5FeGVjdXRlZCIsImlzT25TY3JlZW4iLCJib3R0b20iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImV4ZWN1dGUiLCJFcnJvciIsIkQyVktvdGxpbkVkaXRvcnNfRDJWS290bGluRWRpdG9ycyIsImtvdGxpbkVkaXRvcnMiLCJlZGl0b3JzIiwic2V0RWRpdG9ycyIsInNldExpc3RlbmVyRm9yRWRpdG9yc0F1dG9FeGVjdXRpb24iLCJlZGl0b3IiLCJub2RlcyIsInF1ZXJ5U2VsZWN0b3IiLCJDT0RFX0FSRUEiLCJwdXNoIiwiY29uc29sZSIsImVycm9yIiwibGlzdE9mS290bGluUGxheWdyb3VuZEVkaXRvcnMiLCJLb3RsaW5QbGF5Z3JvdW5kIiwiZ2V0SW5zdGFuY2UiLCJrb3RsaW5QbGF5Z3JvdW5kRWRpdG9yIiwidGhlbiIsInJlZmVyZW5jZUVsZW1lbnRGb3JGaXhlZE1lbnUiLCJ0b3BFbGVtZW50Rml4ZWRPdmVyTWVudSIsImhlaWdodE9mRml4ZWRFbGVtZW50VGhhdEhpZGVzTWVudSIsImhlaWdodCIsInJlZlBvc2l0aW9uRm9yRml4ZWRNZW51IiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFkZGluZ1RvcCIsIm1lbnVQb3NpdGlvbk9ic2VydmVyIiwiQ09OVEVOVCIsIlRPUF9IRUFERVIiLCJDVVJSRU5UX1NFQ1RJT05fTkFNRSIsImlubmVySFRNTCIsInBhZ2VUaXRsZUVsZW1lbnQiLCJnZXRDdXJyZW50U2VjdGlvbk5hbWUiLCJMRVZFTF9PTl9OQVZJR0FUSU9OX0VMRU1FTlRTIiwiY3VycmVudFRpdGxlUGFnZSIsImxldmVsMU1lbnVOYXZpZ2F0aW9uRWxlbWVudCIsInNldExldmVsTmF2T25lIiwibGlzdFRvUmV0dXJuIiwiVElUTEVfVFdPX0VMRU1FTlRTIiwiTkFWSUdBVElPTl9NRU5VX0VMRU1FTlQiLCJuYXZpZ2F0aW9uVHdvRWxlbWVudCIsInJldmVyc2UiLCJsaXN0T2ZUaXRsZUxldmVsVHdvIiwibGFzdFRpdGxlSXNOb3RGb3VuZCIsInRpdGxlTGV2ZWxUd28iLCJ1cGRhdGVMZXZlbFR3b0luTmF2aWdhdGlvbk1lbnUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBekIsRUFBQTZCLEVBQUEsU0FBQTFCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQXFCLFdBQ0EsV0FBMkIsT0FBQXJCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQvQixFQUFBa0MsRUFBQSxHQUlBbEMsSUFBQW1DLEVBQUEsdUNDbEZBaEMsRUFBQUQsUUFBaUJGLEVBQUFrQyxFQUF1Qix3Q0NBeEMvQixFQUFBRCxRQUFpQkYsRUFBQWtDLEVBQXVCLHlEQ0FqQyxTQUFTRSxFQUF1QkMsR0FDbkMsSUFBSUMsR0FBVSxFQUNkQyxPQUFPQyxpQkFBaUIsU0FBV0MsSUFDM0JILEdBQ0FDLE9BQU9HLHNCQUFzQixLQUN6QkwsSUFDQUMsR0FBVSxJQUdsQkEsR0FBVSxJQ1RYLFNBQVNLLElBQ1osWUFBK0JDLElBQXZCTCxPQUFPTSxZQUE2Qk4sT0FBT00sYUFBZ0JDLFNBQVNDLGlCQUFtQkQsU0FBU0UsS0FBS0MsWUFBY0gsU0FBU0UsTUFBc0JFLFVDRDlKLElBQVlDLFNBQVosU0FBWUEsR0FDUkEsRUFBQSx1QkFDQUEsRUFBQSx1QkFDQUEsRUFBQSw2Q0FDQUEsRUFBQSx5QkFDQUEsRUFBQSxtQ0FMSixDQUFZQSxpQkM4RE5DLEVBS0ZDLFlBQVlDLEVBQXNCQyxHQUM5QkMsS0FBS0MsU0FBV0gsRUFDaEJFLEtBQUtFLGVBQWlCRixLQUFLRyxpQkFBaUJKLEdBR2hESyxlQUNJLE9BQU9KLEtBQUtDLFNBQVNJLHdCQUF3QkMsS0FBT3ZCLE9BQU93QixZQUFjLEVBRzdFQyxjQUFjQSxHQUNPLFdBQWRBLEVBQ01SLEtBQUtTLG1DQUNMVCxLQUFLRSxlQUErQlEsVUFBVUMsSUFBSSxVQUdwRFgsS0FBS1MsbUNBQ0hULEtBQUtFLGVBQStCUSxVQUFVRSxPQUFPLFVBSzFEZixpQkFBaUJFLEdBQ3JCLE1BQU1jLEVBQXVCdkIsU0FBU3dCLG9CQUFvQm5CLEVBQWVvQixzQ0FFekUsSUFBSSxNQUFNQyxLQUFtQkgsRUFDekIsR0FBR0csRUFBZ0JDLGFBQWEsVUFBWSxJQUFNakIsS0FBS0MsU0FBU2dCLGFBQWEsTUFDekUsT0FBT0QsRUFLbkJQLHdDQUNJLFlBQTJCckIsSUFBeEJZLEtBQUtFLGdCQUNHRixLQUFLRSxlQUFlUSxVQUFVUSxTQUFTLGlCQ2xHN0NDLEVBQ1R0QixZQUNXdUIsRUFDQUMsR0FEQXJCLEtBQUFvQixXQUNBcEIsS0FBQXFCLGVBR0hyQixLQUFBc0Isa0JBQW1CLEVBQzNCQyx5QkFBMkIsT0FBUXZCLEtBQUtzQixpQkFFeENFLGlCQUNJLE9BQU94QixLQUFLb0IsU0FBU2Ysd0JBQXdCb0IsUUFBVSxHQUFLekIsS0FBS29CLFNBQVNmLHdCQUF3Qm9CLFFBQVUxQyxPQUFPd0IsWUFHaEhWLFVBQ0gsT0FBTyxJQUFJNkIsUUFBUSxDQUFDQyxFQUFTQyxLQUN6QjVCLEtBQUtzQixrQkFBbUIsRUFDeEJ0QixLQUFLcUIsYUFBYVEsVUFDbEJGLElBQ0FDLEVBQU8sSUFBSUUsTUFBTSxvRENmaEJDLEVBQ1RsQyxZQUFZbUMsR0FPSmhDLEtBQUFpQyxXQUxKakMsS0FBS2tDLFdBQVdGLEdBRWhCaEMsS0FBS21DLHFDQUtEdEMsV0FBV21DLEdBQ2YsSUFBSSxNQUFNcEYsS0FBS29GLEVBQWUsQ0FDMUIsTUFBTUksRUFBU0osRUFBY3BGLEdBQ3ZCd0UsRUFBV2dCLEVBQU9DLE1BQU0sR0FBR0MsY0FBYzNDLEVBQWU0QyxXQUU5QyxPQUFibkIsRUFDQ3BCLEtBQUtpQyxRQUFRTyxLQUFLLElBQUlyQixFQUFPQyxFQUE0QmdCLElBRXpESyxRQUFRQyxxQkFBcUI5RixFQUFJLG9CQUtyQ2lELHFDQUNKakIsRUFBdUIsS0FDbkIsSUFBSSxNQUFNd0QsS0FBVXBDLEtBQUtpQyxRQUNsQkcsRUFBT1osWUFBY1ksRUFBT2Isb0JBQzNCYSxFQUFPUCxhQ3BCM0IsTUFBTWMsS0FTRkMsaUJBQWlCLGdCQU5qQkMsWUFBY0MsSUFDVkgsRUFBOEJILEtBQUtNLE1BS1VDLEtBQUssS0FDbEQsSUFBSWhCLEVBQWlCWSxLQ2pCdEIsU0FBOEJLLEVBQTJDQyxHQUU1RSxNQUVNekQsRUFBT0YsU0FBU0UsS0FFaEIwRCxPQUFnRTlELElBQTVCNkQsRUFBeUMsRUFBSUEsRUFBd0I1Qyx3QkFBd0I4QyxPQUV2SXZFLEVBQXVCLEtBRW5CLE1BRU13RSxFQUYwQkMsU0FBVXRFLE9BQU91RSxpQkFBaUJOLEdBQThCTyxZQUV0Q0wsRUFFdkQvRCxLQUE4QmlFLElBQTRCNUQsRUFBS2tCLFVBQVVRLFNBWmxELGNBYXRCMUIsRUFBS2tCLFVBQVVDLElBYk8sY0FjZnhCLEtBQThCaUUsR0FBMkI1RCxFQUFLa0IsVUFBVVEsU0FkekQsZUFldEIxQixFQUFLa0IsVUFBVUUsT0FmTyxnQkNDbEM0QyxDQUNJbEUsU0FBU2dELGNBQWMzQyxFQUFlOEQsU0FDdENuRSxTQUFTZ0QsY0FBYzNDLEVBQWUrRCxhQ1ByQ3BFLFNBQVNnRCxjQUFjM0MsRUFBZWdFLHNCQUFzQ0MsVUFHakYsV0FDSSxNQUFNQyxFQUFtQnZFLFNBQVNnRCxjQUFjLE1BQ2hELE9BQXdCLE9BQXJCdUIsRUFDUUEsRUFBaUJELFVBRWpCLEdBUjhFRSxHTks3RixXQUNJLE1BRU1DLEVBQStCekUsU0FBU3dCLG9CQUFvQm5CLEVBQWVvQiw0QkFFM0VpRCxFQUFtQjFFLFNBQVNnRCxjQUFjLE1BRWhELEdBQXdCLE9BQXJCMEIsRUFDQyxJQUFJLE1BQU1DLEtBQStCRixFQUNsQ0UsRUFBNEJMLFlBQWNJLEVBQWlCSixXQUMxREssRUFBNEJ2RCxVQUFVQyxJQVRoQixVQUxsQ3VELEdBMENPLElBQUl4QyxRQUFRLENBQUNDLEVBQVNDLEtBQ3pCLE1BQU11QyxLQUVBQyxFQUFxQjlFLFNBQVN3QixvQkFBb0JuQixFQUFlOEQsY0FDakVZLEVBQTBCL0UsU0FBU2dELGlCQUFpQjNDLEVBQWVvQixtQkFFekUsSUFBSSxNQUFNdUQsS0FBd0JGLEVBQzlCRCxFQUFhM0IsS0FBSyxJQUFJNUMsRUFBYzBFLEVBQXNCRCxJQUc5RDFDLEVBQVF3QyxFQUFhSSxXQUVyQjNDLEVBQU8sSUFBSUUsTUFBTSxxREFqQ1NpQixLQUFNbEYsSUFDaENlLEVBQXVCLE1BTS9CLFNBQXdDNEYsR0FDcEMsSUFBSUMsR0FBc0IsRUFFMUIsSUFBSSxNQUFNQyxLQUFpQkYsRUFDcEJFLEVBQWN0RSxVQUFZcUUsR0FDekJBLEdBQXNCLEVBQ3RCQyxFQUFjbEUsVUFBWSxVQUUxQmtFLEVBQWNsRSxVQUFZLFdBYjFCbUUsQ0FBK0I5RyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2xvZ28tcGxheS5wbmdcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvbG9nby1uZWdhdGl2ZS5wbmdcIjsiLCJleHBvcnQgZnVuY3Rpb24gYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcihmdW46ICgpID0+IHZvaWQpIHtcbiAgICBsZXQgdGlja2luZyA9IGZhbHNlXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKGV2KSA9PiB7XG4gICAgICAgIGlmKCF0aWNraW5nKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBmdW4oKVxuICAgICAgICAgICAgICAgIHRpY2tpbmcgPSBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aWNraW5nID0gdHJ1ZVxuICAgIH0pXG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh3aW5kb3cucGFnZVlPZmZzZXQgIT09IHVuZGVmaW5lZCkgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiAoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keSkgYXMgSFRNTEVsZW1lbnQpLnNjcm9sbFRvcFxufSIsImV4cG9ydCBlbnVtIEhUTUxfU0VMRUNUT1JTIHtcbiAgICBDT0RFX0FSRUEgICAgICAgICAgICAgICA9IFwiLmNvZGUtYXJlYVwiLFxuICAgIENPTlRFTlQgICAgICAgICAgICAgICAgID0gXCIjZDJ2LWNvbnRlbnRcIixcbiAgICBDVVJSRU5UX1NFQ1RJT05fTkFNRSAgICA9IFwiI2N1cnJlbnQtc2VjdGlvbi1uYW1lXCIsXG4gICAgVE9QX0hFQURFUiAgICAgICAgICAgICAgPSBcIiNkMnYtaGVhZGVyXCIsXG4gICAgTkFWSUdBVElPTl9NRU5VICAgICAgICAgPSBcIiNzaXRlLW5hdmlnYXRpb25cIlxufSIsImltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuLi9IVE1MX1NFTEVDVE9SU1wiXG5pbXBvcnQge2FkZFNjcm9sbEV2ZW50TGlzdGVuZXJ9IGZyb20gXCIuLi9hZGRTY3JvbGxFdmVudExpc3RlbmVyXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHNldE5hdmlnYXRpb25NZW51KCkge1xuICAgIHNldExldmVsTmF2T25lKClcbiAgICBzZXRMZXZlbE5hdlR3bygpXG59XG5cbmZ1bmN0aW9uIHNldExldmVsTmF2T25lKCkge1xuICAgIGNvbnN0IENVUlJFTlRfU0VDVElPTl9DTEFTU05BTUUgPSBcImFjdGl2ZVwiXG5cbiAgICBjb25zdCBMRVZFTF9PTl9OQVZJR0FUSU9OX0VMRU1FTlRTID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHtIVE1MX1NFTEVDVE9SUy5OQVZJR0FUSU9OX01FTlV9ID4gbGkgPiBhYClcblxuICAgIGNvbnN0IGN1cnJlbnRUaXRsZVBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaDFcIilcblxuICAgIGlmKGN1cnJlbnRUaXRsZVBhZ2UgIT09IG51bGwpe1xuICAgICAgICBmb3IoY29uc3QgbGV2ZWwxTWVudU5hdmlnYXRpb25FbGVtZW50IG9mIExFVkVMX09OX05BVklHQVRJT05fRUxFTUVOVFMpIHtcbiAgICAgICAgICAgIGlmKGxldmVsMU1lbnVOYXZpZ2F0aW9uRWxlbWVudC5pbm5lckhUTUwgPT09IGN1cnJlbnRUaXRsZVBhZ2UuaW5uZXJIVE1MKSB7XG4gICAgICAgICAgICAgICAgbGV2ZWwxTWVudU5hdmlnYXRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSUkVOVF9TRUNUSU9OX0NMQVNTTkFNRSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0TGV2ZWxOYXZUd28oKSB7XG4gICAgZ2VuZXJhdGVMaXN0T2ZUaXRsZUxldmVsVHdvKCkudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVMZXZlbFR3b0luTmF2aWdhdGlvbk1lbnUodmFsdWUpXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gdXBkYXRlTGV2ZWxUd29Jbk5hdmlnYXRpb25NZW51KGxpc3RPZlRpdGxlTGV2ZWxUd286IFRpdGxlTGV2ZWxUd29bXSkge1xuICAgIGxldCBsYXN0VGl0bGVJc05vdEZvdW5kID0gdHJ1ZVxuXG4gICAgZm9yKGNvbnN0IHRpdGxlTGV2ZWxUd28gb2YgbGlzdE9mVGl0bGVMZXZlbFR3bykge1xuICAgICAgICBpZih0aXRsZUxldmVsVHdvLmlzQWN0aXZlICYmIGxhc3RUaXRsZUlzTm90Rm91bmQpIHtcbiAgICAgICAgICAgIGxhc3RUaXRsZUlzTm90Rm91bmQgPSBmYWxzZVxuICAgICAgICAgICAgdGl0bGVMZXZlbFR3by5jbGFzc25hbWUgPSBcImFjdGl2ZVwiXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aXRsZUxldmVsVHdvLmNsYXNzbmFtZSA9IFwidW5hY3RpdmVcIlxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUxpc3RPZlRpdGxlTGV2ZWxUd28oKTogUHJvbWlzZTxUaXRsZUxldmVsVHdvW10+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBsaXN0VG9SZXR1cm4gPSBbXVxuXG4gICAgICAgIGNvbnN0IFRJVExFX1RXT19FTEVNRU5UUyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7SFRNTF9TRUxFQ1RPUlMuQ09OVEVOVH0gaDJgKSBhcyBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PlxuICAgICAgICBjb25zdCBOQVZJR0FUSU9OX01FTlVfRUxFTUVOVCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7SFRNTF9TRUxFQ1RPUlMuTkFWSUdBVElPTl9NRU5VfWApIGFzIEhUTUxFbGVtZW50XG5cbiAgICAgICAgZm9yKGNvbnN0IG5hdmlnYXRpb25Ud29FbGVtZW50IG9mIFRJVExFX1RXT19FTEVNRU5UUykge1xuICAgICAgICAgICAgbGlzdFRvUmV0dXJuLnB1c2gobmV3IFRpdGxlTGV2ZWxUd28obmF2aWdhdGlvblR3b0VsZW1lbnQsIE5BVklHQVRJT05fTUVOVV9FTEVNRU5UKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc29sdmUobGlzdFRvUmV0dXJuLnJldmVyc2UoKSlcblxuICAgICAgICByZWplY3QobmV3IEVycm9yKFwiY2FuJ3QgZ2V0IGxpc3Qgb2YgbGV2ZWwgdHdvIGluIG5hdmlnYXRpb24gbWVudVwiKSlcbiAgICB9KVxufVxuXG5jbGFzcyBUaXRsZUxldmVsVHdvIHtcbiAgICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudFxuXG4gICAgcHJpdmF0ZSBfZWxlbWVudEluTWVudTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWRcblxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBuYXZpZ2F0aW9uTWVudUVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50XG4gICAgICAgIHRoaXMuX2VsZW1lbnRJbk1lbnUgPSB0aGlzLmdldEVsZW1lbnRJbk1lbnUobmF2aWdhdGlvbk1lbnVFbGVtZW50KVxuICAgIH1cblxuICAgIGdldCBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIDw9IHdpbmRvdy5pbm5lckhlaWdodCAvIDJcbiAgICB9XG5cbiAgICBzZXQgY2xhc3NuYW1lKGNsYXNzbmFtZTogXCJhY3RpdmVcInxcInVuYWN0aXZlXCIpIHtcbiAgICAgICAgaWYoY2xhc3NuYW1lID09PSBcImFjdGl2ZVwiKSB7XG4gICAgICAgICAgICBpZighIHRoaXMuX2VsZW1lbnRJbk1lbnVDb250YWluc0FjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgKHRoaXMuX2VsZW1lbnRJbk1lbnUgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHRoaXMuX2VsZW1lbnRJbk1lbnVDb250YWluc0FjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgKHRoaXMuX2VsZW1lbnRJbk1lbnUgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RWxlbWVudEluTWVudShuYXZpZ2F0aW9uTWVudUVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGxpc3RPZkxldmVsVHdvSW5NZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHtIVE1MX1NFTEVDVE9SUy5OQVZJR0FUSU9OX01FTlV9ID4gbGkgPiB1bCA+IGxpID4gYWApIGFzIE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+XG5cbiAgICAgICAgZm9yKGNvbnN0IGxldmVsVHdvRWxlbWVudCBvZiBsaXN0T2ZMZXZlbFR3b0luTWVudSkge1xuICAgICAgICAgICAgaWYobGV2ZWxUd29FbGVtZW50LmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiICsgdGhpcy5fZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsZXZlbFR3b0VsZW1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IF9lbGVtZW50SW5NZW51Q29udGFpbnNBY3RpdmVDbGFzcygpIHtcbiAgICAgICAgaWYodGhpcy5fZWxlbWVudEluTWVudSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudEluTWVudS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtJS290bGluUGxheWdyb3VuZEVkaXRvcn0gZnJvbSBcIi4vSUtvdGxpblBsYXlncm91bmRFZGl0b3JcIlxuXG5leHBvcnQgY2xhc3MgRWRpdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGNvZGVBcmVhOiBIVE1MRGl2RWxlbWVudCxcbiAgICAgICAgcHVibGljIGtvdGxpbkVkaXRvcjogSUtvdGxpblBsYXlncm91bmRFZGl0b3IsXG4gICAgKSB7fVxuXG4gICAgcHJpdmF0ZSBfaGFzQmVlbkV4ZWN1dGVkID0gZmFsc2VcbiAgICBnZXQgaGFzTm90QmVlbkV4ZWN1dGVkKCkgeyByZXR1cm4gIXRoaXMuX2hhc0JlZW5FeGVjdXRlZH1cblxuICAgIGdldCBpc09uU2NyZWVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2RlQXJlYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPj0gMCAmJiB0aGlzLmNvZGVBcmVhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA8PSB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICB9XG5cbiAgICBwdWJsaWMgZXhlY3V0ZSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFzQmVlbkV4ZWN1dGVkID0gdHJ1ZVxuICAgICAgICAgICAgdGhpcy5rb3RsaW5FZGl0b3IuZXhlY3V0ZSgpXG4gICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJjYW4ndCBleGVjdXRlIGtvdGxpbiBwbGF5Z3JvdW5kIGVkaXRvclwiKSlcbiAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCB7SUtvdGxpblBsYXlncm91bmRFZGl0b3J9IGZyb20gXCIuL0lLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yXCJcbmltcG9ydCB7RWRpdG9yfSBmcm9tIFwiLi9FZGl0b3JcIlxuaW1wb3J0IHthZGRTY3JvbGxFdmVudExpc3RlbmVyfSBmcm9tIFwiLi4vYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lclwiXG5pbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi4vSFRNTF9TRUxFQ1RPUlNcIlxuXG5leHBvcnQgY2xhc3MgRDJWS290bGluRWRpdG9ycyB7XG4gICAgY29uc3RydWN0b3Ioa290bGluRWRpdG9yczogSUtvdGxpblBsYXlncm91bmRFZGl0b3JbXSkge1xuXG4gICAgICAgIHRoaXMuc2V0RWRpdG9ycyhrb3RsaW5FZGl0b3JzKVxuXG4gICAgICAgIHRoaXMuc2V0TGlzdGVuZXJGb3JFZGl0b3JzQXV0b0V4ZWN1dGlvbigpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlZGl0b3JzOiBFZGl0b3JbXSA9IFtdXG5cbiAgICBwcml2YXRlIHNldEVkaXRvcnMoa290bGluRWRpdG9yczogSUtvdGxpblBsYXlncm91bmRFZGl0b3JbXSkge1xuICAgICAgICBmb3IoY29uc3QgaSBpbiBrb3RsaW5FZGl0b3JzKSB7XG4gICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBrb3RsaW5FZGl0b3JzW2ldXG4gICAgICAgICAgICBjb25zdCBjb2RlQXJlYSA9IGVkaXRvci5ub2Rlc1swXS5xdWVyeVNlbGVjdG9yKEhUTUxfU0VMRUNUT1JTLkNPREVfQVJFQSlcblxuICAgICAgICAgICAgaWYoY29kZUFyZWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvcnMucHVzaChuZXcgRWRpdG9yKGNvZGVBcmVhIGFzIEhUTUxEaXZFbGVtZW50LCBlZGl0b3IpKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBjb2RlQXJlYSBvZiAke2kgKyAxfSBrb3RsaW4gZWRpdG9yYClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0TGlzdGVuZXJGb3JFZGl0b3JzQXV0b0V4ZWN1dGlvbigpIHtcbiAgICAgICAgYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgICAgICBmb3IoY29uc3QgZWRpdG9yIG9mIHRoaXMuZWRpdG9ycykge1xuICAgICAgICAgICAgICAgIGlmKGVkaXRvci5pc09uU2NyZWVuICYmIGVkaXRvci5oYXNOb3RCZWVuRXhlY3V0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmV4ZWN1dGUoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJpbXBvcnQge0lLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yfSBmcm9tIFwiLi9JS290bGluUGxheWdyb3VuZEVkaXRvclwiXG5pbXBvcnQge0QyVktvdGxpbkVkaXRvcnN9IGZyb20gXCIuL0QyVktvdGxpbkVkaXRvcnNcIlxuXG5kZWNsYXJlIGZ1bmN0aW9uIEtvdGxpblBsYXlncm91bmQoc2VsZWN0b3I6IHN0cmluZywgZXZlbnRGdW5jdGlvbnM/OiBJRXZlbnRGdW5jdGlvbnMpOiBQcm9taXNlPElLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yW10+XG5cbmludGVyZmFjZSBJRXZlbnRGdW5jdGlvbnMge1xuICAgIGNhbGxiYWNrPzogKHRhcmdldE5vZGU6IEhUTUxFbGVtZW50LCBtb3VudE5vZGU6IEhUTUxFbGVtZW50KSA9PiB2b2lkLFxuICAgIGdldEluc3RhbmNlPzogKGluc3RhbmNlOiBJS290bGluUGxheWdyb3VuZEVkaXRvcikgPT4gdm9pZFxuICAgIG9uQ2hhbmdlPzogKGNvZGU6IHN0cmluZykgPT4gdm9pZCxcbiAgICBvblRlc3RQYXNzZWQ/OiAoKSA9PiB2b2lkLFxufVxuXG5jb25zdCBsaXN0T2ZLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yczogSUtvdGxpblBsYXlncm91bmRFZGl0b3JbXSA9IFtdXG5cbmNvbnN0IGV2ZW50RnVuY3Rpb25zID0ge1xuICAgIGdldEluc3RhbmNlOiAoa290bGluUGxheWdyb3VuZEVkaXRvcjogSUtvdGxpblBsYXlncm91bmRFZGl0b3IpID0+IHtcbiAgICAgICAgbGlzdE9mS290bGluUGxheWdyb3VuZEVkaXRvcnMucHVzaChrb3RsaW5QbGF5Z3JvdW5kRWRpdG9yKVxuICAgIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRFZGl0b3JzKCkge1xuICAgIEtvdGxpblBsYXlncm91bmQoJy5rb3RsaW4tY29kZScsIGV2ZW50RnVuY3Rpb25zKS50aGVuKCgpID0+IHtcbiAgICAgICAgbmV3IEQyVktvdGxpbkVkaXRvcnMobGlzdE9mS290bGluUGxheWdyb3VuZEVkaXRvcnMpXG4gICAgfSlcbn1cbiIsImltcG9ydCB7YWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcn0gZnJvbSBcIi4vYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lclwiXG5pbXBvcnQge2dldFBhZ2VTY3JvbGxQb3NpdGlvblRvcH0gZnJvbSBcIi4vZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wXCJcbmltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuL0hUTUxfU0VMRUNUT1JTXCJcblxuXG5leHBvcnQgZnVuY3Rpb24gbWVudVBvc2l0aW9uT2JzZXJ2ZXIocmVmZXJlbmNlRWxlbWVudEZvckZpeGVkTWVudTogSFRNTEVsZW1lbnQsIHRvcEVsZW1lbnRGaXhlZE92ZXJNZW51PzogSFRNTEVsZW1lbnQpIHtcblxuICAgIGNvbnN0IEZJWEVEX01FTlVfQ0xBU1NfTkFNRSA9IFwibWVudS1maXhlZFwiXG5cbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keVxuXG4gICAgY29uc3QgaGVpZ2h0T2ZGaXhlZEVsZW1lbnRUaGF0SGlkZXNNZW51ID0gdG9wRWxlbWVudEZpeGVkT3Zlck1lbnUgPT09IHVuZGVmaW5lZCA/ICAwIDogdG9wRWxlbWVudEZpeGVkT3Zlck1lbnUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0XG5cbiAgICBhZGRTY3JvbGxFdmVudExpc3RlbmVyKCgpID0+IHtcblxuICAgICAgICBjb25zdCBwb3NpdGlvblRvcE9mUmVmRWxlbWVudCA9IHBhcnNlSW50KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyZWZlcmVuY2VFbGVtZW50Rm9yRml4ZWRNZW51KS5wYWRkaW5nVG9wIGFzIHN0cmluZyApXG5cbiAgICAgICAgY29uc3QgcmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUgPSBwb3NpdGlvblRvcE9mUmVmRWxlbWVudCAtIGhlaWdodE9mRml4ZWRFbGVtZW50VGhhdEhpZGVzTWVudVxuXG4gICAgICAgIGlmKGdldFBhZ2VTY3JvbGxQb3NpdGlvblRvcCgpID49IHJlZlBvc2l0aW9uRm9yRml4ZWRNZW51ICYmICFib2R5LmNsYXNzTGlzdC5jb250YWlucyhGSVhFRF9NRU5VX0NMQVNTX05BTUUpKXtcbiAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZChGSVhFRF9NRU5VX0NMQVNTX05BTUUpXG4gICAgICAgIH0gZWxzZSBpZiAoZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wKCkgPD0gcmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoRklYRURfTUVOVV9DTEFTU19OQU1FKSkge1xuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKEZJWEVEX01FTlVfQ0xBU1NfTkFNRSlcbiAgICAgICAgfVxuXG4gICAgfSlcbn1cbiIsImltcG9ydCB7bWVudVBvc2l0aW9uT2JzZXJ2ZXJ9IGZyb20gXCIuL21lbnVQb3NpdGlvbk9ic2VydmVyXCJcbmltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuL0hUTUxfU0VMRUNUT1JTXCJcbmltcG9ydCB7c2V0Q3VycmVudFNlY3Rpb25OYW1lfSBmcm9tIFwiLi9uYXZpZ2F0aW9uTWVudS9zZXRDdXJyZW50U2VjdGlvbk5hbWVcIlxuaW1wb3J0IHtzZXROYXZpZ2F0aW9uTWVudX0gZnJvbSBcIi4vbmF2aWdhdGlvbk1lbnUvc2V0TmF2aWdhdGlvbk1lbnVcIlxuaW1wb3J0IHtzZXRFZGl0b3JzfSBmcm9tIFwiLi9lZGl0b3Ivc2V0RWRpdG9yc1wiXG5cbnNldEVkaXRvcnMoKVxuXG5tZW51UG9zaXRpb25PYnNlcnZlcihcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEhUTUxfU0VMRUNUT1JTLkNPTlRFTlQpIGFzIEhUTUxFbGVtZW50LFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuVE9QX0hFQURFUikgYXMgSFRNTEVsZW1lbnQsXG4pXG5cblxuc2V0Q3VycmVudFNlY3Rpb25OYW1lKClcblxuc2V0TmF2aWdhdGlvbk1lbnUoKSIsImltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuLi9IVE1MX1NFTEVDVE9SU1wiXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U2VjdGlvbk5hbWUoKSB7XG4gICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuQ1VSUkVOVF9TRUNUSU9OX05BTUUpIGFzIEhUTUxFbGVtZW50KS5pbm5lckhUTUwgPSBnZXRDdXJyZW50U2VjdGlvbk5hbWUoKVxufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50U2VjdGlvbk5hbWUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYWdlVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgxXCIpXG4gICAgaWYocGFnZVRpdGxlRWxlbWVudCAhPT0gbnVsbCApIHtcbiAgICAgICAgcmV0dXJuIHBhZ2VUaXRsZUVsZW1lbnQuaW5uZXJIVE1MXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9