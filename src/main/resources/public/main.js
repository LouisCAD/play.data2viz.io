!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){},function(e,t,n){e.exports=n.p+"images/logo-play.png"},function(e,t,n){e.exports=n.p+"images/logo-negative.png"},function(e,t,n){e.exports=n.p+"images/go-back-to-main-page.png"},function(e,t,n){"use strict";function o(e){let t=!1;window.addEventListener("scroll",n=>{t||window.requestAnimationFrame(()=>{e(),t=!1}),t=!0})}function i(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var r;n.r(t),function(e){e.CODE_AREA=".code-area",e.CONTENT="#d2v-content",e.CURRENT_SECTION_NAME="#current-section-name",e.TOP_HEADER="#d2v-header",e.NAVIGATION_MENU="#site-navigation"}(r||(r={}));class s{constructor(e,t){this._element=e,this._elementInMenu=this.getElementInMenu(t)}get isActive(){return this._element.getBoundingClientRect().top<=window.innerHeight/2}set classname(e){"active"===e?this._elementInMenuContainsActiveClass||this._elementInMenu.classList.add("active"):this._elementInMenuContainsActiveClass&&this._elementInMenu.classList.remove("active")}getElementInMenu(e){const t=document.querySelectorAll(`${r.NAVIGATION_MENU} > li > ul > li > a`);for(const e of t)if(e.getAttribute("href")==="#"+this._element.getAttribute("id"))return e}get _elementInMenuContainsActiveClass(){return void 0!==this._elementInMenu&&this._elementInMenu.classList.contains("active")}}class c{constructor(e,t){this.codeArea=e,this.kotlinEditor=t,this._hasBeenExecuted=!1}get hasNotBeenExecuted(){return!this._hasBeenExecuted}get isOnScreen(){return this.codeArea.getBoundingClientRect().bottom>=0&&this.codeArea.getBoundingClientRect().bottom<=window.innerHeight}execute(){return new Promise((e,t)=>{this._hasBeenExecuted=!0,this.kotlinEditor.execute(),e(),t(new Error("can't execute kotlin playground editor"))})}}class u{constructor(e){this.editors=[],this.setEditors(e),this.setListenerForEditorsAutoExecution(),this.runVisibleEditors()}setEditors(e){for(const t in e){const n=e[t],o=n.nodes[0].querySelector(r.CODE_AREA);null!==o?this.editors.push(new c(o,n)):console.error(`codeArea of ${t+1} kotlin editor`)}}setListenerForEditorsAutoExecution(){o(()=>{this.runVisibleEditors()})}runVisibleEditors(){for(const e of this.editors)e.isOnScreen&&e.hasNotBeenExecuted&&e.execute()}}const l=[];KotlinPlayground(".kotlin-code",{getInstance:e=>{l.push(e)}}).then(()=>{new u(l)}),function(e,t){const n=document.body,r=void 0===t?0:t.getBoundingClientRect().height;o(()=>{const t=parseInt(window.getComputedStyle(e).paddingTop)-r;i()>=t&&!n.classList.contains("menu-fixed")?n.classList.add("menu-fixed"):i()<=t&&n.classList.contains("menu-fixed")&&n.classList.remove("menu-fixed")})}(document.querySelector(r.CONTENT),document.querySelector(r.TOP_HEADER)),document.querySelector(r.CURRENT_SECTION_NAME).innerHTML=function(){const e=document.querySelector("h1");return null!==e?e.innerHTML:""}(),function(){const e=document.querySelectorAll(`${r.NAVIGATION_MENU} > li > a`),t=document.querySelector("h1");if(null!==t)for(const n of e)n.innerHTML===t.innerHTML&&n.classList.add("active")}(),new Promise((e,t)=>{const n=[],o=document.querySelectorAll(`${r.CONTENT} h2`),i=document.querySelector(`${r.NAVIGATION_MENU}`);for(const e of o)n.push(new s(e,i));e(n.reverse()),t(new Error("can't get list of level two in navigation menu"))}).then(e=>{o(()=>{!function(e){let t=!0;for(const n of e)n.isActive&&t?(t=!1,n.classname="active"):n.classname="unactive"}(e)})});n(0),n(1),n(2),n(3)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9sb2dvLXBsYXkucG5nIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvbG9nby1uZWdhdGl2ZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9nby1iYWNrLXRvLW1haW4tcGFnZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nZXRQYWdlU2Nyb2xsUG9zaXRpb25Ub3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvSFRNTF9TRUxFQ1RPUlMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvbmF2aWdhdGlvbk1lbnUvc2V0TmF2aWdhdGlvbk1lbnUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZWRpdG9yL0VkaXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lZGl0b3IvRDJWS290bGluRWRpdG9ycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lZGl0b3Ivc2V0RWRpdG9ycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tZW51UG9zaXRpb25PYnNlcnZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL25hdmlnYXRpb25NZW51L3NldEN1cnJlbnRTZWN0aW9uTmFtZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFkZFNjcm9sbEV2ZW50TGlzdGVuZXIiLCJmdW4iLCJ0aWNraW5nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wIiwidW5kZWZpbmVkIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImJvZHkiLCJwYXJlbnROb2RlIiwic2Nyb2xsVG9wIiwiSFRNTF9TRUxFQ1RPUlMiLCJzZXROYXZpZ2F0aW9uTWVudV9UaXRsZUxldmVsVHdvIiwiW29iamVjdCBPYmplY3RdIiwiZWxlbWVudCIsIm5hdmlnYXRpb25NZW51RWxlbWVudCIsInRoaXMiLCJfZWxlbWVudCIsIl9lbGVtZW50SW5NZW51IiwiZ2V0RWxlbWVudEluTWVudSIsImlzQWN0aXZlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiaW5uZXJIZWlnaHQiLCJjbGFzc25hbWUiLCJfZWxlbWVudEluTWVudUNvbnRhaW5zQWN0aXZlQ2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJsaXN0T2ZMZXZlbFR3b0luTWVudSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJOQVZJR0FUSU9OX01FTlUiLCJsZXZlbFR3b0VsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJjb250YWlucyIsIkVkaXRvciIsImNvZGVBcmVhIiwia290bGluRWRpdG9yIiwiX2hhc0JlZW5FeGVjdXRlZCIsImhhc05vdEJlZW5FeGVjdXRlZCIsImlzT25TY3JlZW4iLCJib3R0b20iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImV4ZWN1dGUiLCJFcnJvciIsIkQyVktvdGxpbkVkaXRvcnNfRDJWS290bGluRWRpdG9ycyIsImtvdGxpbkVkaXRvcnMiLCJlZGl0b3JzIiwic2V0RWRpdG9ycyIsInNldExpc3RlbmVyRm9yRWRpdG9yc0F1dG9FeGVjdXRpb24iLCJydW5WaXNpYmxlRWRpdG9ycyIsImVkaXRvciIsIm5vZGVzIiwicXVlcnlTZWxlY3RvciIsIkNPREVfQVJFQSIsInB1c2giLCJjb25zb2xlIiwiZXJyb3IiLCJsaXN0T2ZLb3RsaW5QbGF5Z3JvdW5kRWRpdG9ycyIsIktvdGxpblBsYXlncm91bmQiLCJnZXRJbnN0YW5jZSIsImtvdGxpblBsYXlncm91bmRFZGl0b3IiLCJ0aGVuIiwicmVmZXJlbmNlRWxlbWVudEZvckZpeGVkTWVudSIsInRvcEVsZW1lbnRGaXhlZE92ZXJNZW51IiwiaGVpZ2h0T2ZGaXhlZEVsZW1lbnRUaGF0SGlkZXNNZW51IiwiaGVpZ2h0IiwicmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJwYWRkaW5nVG9wIiwibWVudVBvc2l0aW9uT2JzZXJ2ZXIiLCJDT05URU5UIiwiVE9QX0hFQURFUiIsIkNVUlJFTlRfU0VDVElPTl9OQU1FIiwiaW5uZXJIVE1MIiwicGFnZVRpdGxlRWxlbWVudCIsImdldEN1cnJlbnRTZWN0aW9uTmFtZSIsIkxFVkVMX09OX05BVklHQVRJT05fRUxFTUVOVFMiLCJjdXJyZW50VGl0bGVQYWdlIiwibGV2ZWwxTWVudU5hdmlnYXRpb25FbGVtZW50Iiwic2V0TGV2ZWxOYXZPbmUiLCJsaXN0VG9SZXR1cm4iLCJUSVRMRV9UV09fRUxFTUVOVFMiLCJOQVZJR0FUSU9OX01FTlVfRUxFTUVOVCIsIm5hdmlnYXRpb25Ud29FbGVtZW50IiwicmV2ZXJzZSIsImxpc3RPZlRpdGxlTGV2ZWxUd28iLCJsYXN0VGl0bGVJc05vdEZvdW5kIiwidGl0bGVMZXZlbFR3byIsInVwZGF0ZUxldmVsVHdvSW5OYXZpZ2F0aW9uTWVudSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFB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SSxXQUVyQjVDLEVBQU8sSUFBSUUsTUFBTSxxREFqQ1NrQixLQUFNbkYsSUFDaENlLEVBQXVCLE1BTS9CLFNBQXdDNkYsR0FDcEMsSUFBSUMsR0FBc0IsRUFFMUIsSUFBSSxNQUFNQyxLQUFpQkYsRUFDcEJFLEVBQWN2RSxVQUFZc0UsR0FDekJBLEdBQXNCLEVBQ3RCQyxFQUFjbkUsVUFBWSxVQUUxQm1FLEVBQWNuRSxVQUFZLFdBYjFCb0UsQ0FBK0IvRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2xvZ28tcGxheS5wbmdcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvbG9nby1uZWdhdGl2ZS5wbmdcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvZ28tYmFjay10by1tYWluLXBhZ2UucG5nXCI7IiwiZXhwb3J0IGZ1bmN0aW9uIGFkZFNjcm9sbEV2ZW50TGlzdGVuZXIoZnVuOiAoKSA9PiB2b2lkKSB7XG4gICAgbGV0IHRpY2tpbmcgPSBmYWxzZVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIChldikgPT4ge1xuICAgICAgICBpZighdGlja2luZykge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZnVuKClcbiAgICAgICAgICAgICAgICB0aWNraW5nID0gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgdGlja2luZyA9IHRydWVcbiAgICB9KVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldFBhZ2VTY3JvbGxQb3NpdGlvblRvcCgpOiBudW1iZXIge1xuICAgIHJldHVybiAod2luZG93LnBhZ2VZT2Zmc2V0ICE9PSB1bmRlZmluZWQpID8gd2luZG93LnBhZ2VZT2Zmc2V0IDogKChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlIHx8IGRvY3VtZW50LmJvZHkpIGFzIEhUTUxFbGVtZW50KS5zY3JvbGxUb3Bcbn0iLCJleHBvcnQgZW51bSBIVE1MX1NFTEVDVE9SUyB7XG4gICAgQ09ERV9BUkVBICAgICAgICAgICAgICAgPSBcIi5jb2RlLWFyZWFcIixcbiAgICBDT05URU5UICAgICAgICAgICAgICAgICA9IFwiI2Qydi1jb250ZW50XCIsXG4gICAgQ1VSUkVOVF9TRUNUSU9OX05BTUUgICAgPSBcIiNjdXJyZW50LXNlY3Rpb24tbmFtZVwiLFxuICAgIFRPUF9IRUFERVIgICAgICAgICAgICAgID0gXCIjZDJ2LWhlYWRlclwiLFxuICAgIE5BVklHQVRJT05fTUVOVSAgICAgICAgID0gXCIjc2l0ZS1uYXZpZ2F0aW9uXCJcbn0iLCJpbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi4vSFRNTF9TRUxFQ1RPUlNcIlxuaW1wb3J0IHthZGRTY3JvbGxFdmVudExpc3RlbmVyfSBmcm9tIFwiLi4vYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lclwiXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXROYXZpZ2F0aW9uTWVudSgpIHtcbiAgICBzZXRMZXZlbE5hdk9uZSgpXG4gICAgc2V0TGV2ZWxOYXZUd28oKVxufVxuXG5mdW5jdGlvbiBzZXRMZXZlbE5hdk9uZSgpIHtcbiAgICBjb25zdCBDVVJSRU5UX1NFQ1RJT05fQ0xBU1NOQU1FID0gXCJhY3RpdmVcIlxuXG4gICAgY29uc3QgTEVWRUxfT05fTkFWSUdBVElPTl9FTEVNRU5UUyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7SFRNTF9TRUxFQ1RPUlMuTkFWSUdBVElPTl9NRU5VfSA+IGxpID4gYWApXG5cbiAgICBjb25zdCBjdXJyZW50VGl0bGVQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgxXCIpXG5cbiAgICBpZihjdXJyZW50VGl0bGVQYWdlICE9PSBudWxsKXtcbiAgICAgICAgZm9yKGNvbnN0IGxldmVsMU1lbnVOYXZpZ2F0aW9uRWxlbWVudCBvZiBMRVZFTF9PTl9OQVZJR0FUSU9OX0VMRU1FTlRTKSB7XG4gICAgICAgICAgICBpZihsZXZlbDFNZW51TmF2aWdhdGlvbkVsZW1lbnQuaW5uZXJIVE1MID09PSBjdXJyZW50VGl0bGVQYWdlLmlubmVySFRNTCkge1xuICAgICAgICAgICAgICAgIGxldmVsMU1lbnVOYXZpZ2F0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKENVUlJFTlRfU0VDVElPTl9DTEFTU05BTUUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldExldmVsTmF2VHdvKCkge1xuICAgIGdlbmVyYXRlTGlzdE9mVGl0bGVMZXZlbFR3bygpLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIGFkZFNjcm9sbEV2ZW50TGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlTGV2ZWxUd29Jbk5hdmlnYXRpb25NZW51KHZhbHVlKVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxldmVsVHdvSW5OYXZpZ2F0aW9uTWVudShsaXN0T2ZUaXRsZUxldmVsVHdvOiBUaXRsZUxldmVsVHdvW10pIHtcbiAgICBsZXQgbGFzdFRpdGxlSXNOb3RGb3VuZCA9IHRydWVcblxuICAgIGZvcihjb25zdCB0aXRsZUxldmVsVHdvIG9mIGxpc3RPZlRpdGxlTGV2ZWxUd28pIHtcbiAgICAgICAgaWYodGl0bGVMZXZlbFR3by5pc0FjdGl2ZSAmJiBsYXN0VGl0bGVJc05vdEZvdW5kKSB7XG4gICAgICAgICAgICBsYXN0VGl0bGVJc05vdEZvdW5kID0gZmFsc2VcbiAgICAgICAgICAgIHRpdGxlTGV2ZWxUd28uY2xhc3NuYW1lID0gXCJhY3RpdmVcIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGl0bGVMZXZlbFR3by5jbGFzc25hbWUgPSBcInVuYWN0aXZlXCJcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVMaXN0T2ZUaXRsZUxldmVsVHdvKCk6IFByb21pc2U8VGl0bGVMZXZlbFR3b1tdPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgbGlzdFRvUmV0dXJuID0gW11cblxuICAgICAgICBjb25zdCBUSVRMRV9UV09fRUxFTUVOVFMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke0hUTUxfU0VMRUNUT1JTLkNPTlRFTlR9IGgyYCkgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD5cbiAgICAgICAgY29uc3QgTkFWSUdBVElPTl9NRU5VX0VMRU1FTlQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke0hUTUxfU0VMRUNUT1JTLk5BVklHQVRJT05fTUVOVX1gKSBhcyBIVE1MRWxlbWVudFxuXG4gICAgICAgIGZvcihjb25zdCBuYXZpZ2F0aW9uVHdvRWxlbWVudCBvZiBUSVRMRV9UV09fRUxFTUVOVFMpIHtcbiAgICAgICAgICAgIGxpc3RUb1JldHVybi5wdXNoKG5ldyBUaXRsZUxldmVsVHdvKG5hdmlnYXRpb25Ud29FbGVtZW50LCBOQVZJR0FUSU9OX01FTlVfRUxFTUVOVCkpXG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKGxpc3RUb1JldHVybi5yZXZlcnNlKCkpXG5cbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImNhbid0IGdldCBsaXN0IG9mIGxldmVsIHR3byBpbiBuYXZpZ2F0aW9uIG1lbnVcIikpXG4gICAgfSlcbn1cblxuY2xhc3MgVGl0bGVMZXZlbFR3byB7XG4gICAgcHJpdmF0ZSBfZWxlbWVudDogSFRNTEVsZW1lbnRcblxuICAgIHByaXZhdGUgX2VsZW1lbnRJbk1lbnU6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkXG5cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgbmF2aWdhdGlvbk1lbnVFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudFxuICAgICAgICB0aGlzLl9lbGVtZW50SW5NZW51ID0gdGhpcy5nZXRFbGVtZW50SW5NZW51KG5hdmlnYXRpb25NZW51RWxlbWVudClcbiAgICB9XG5cbiAgICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCA8PSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyXG4gICAgfVxuXG4gICAgc2V0IGNsYXNzbmFtZShjbGFzc25hbWU6IFwiYWN0aXZlXCJ8XCJ1bmFjdGl2ZVwiKSB7XG4gICAgICAgIGlmKGNsYXNzbmFtZSA9PT0gXCJhY3RpdmVcIikge1xuICAgICAgICAgICAgaWYoISB0aGlzLl9lbGVtZW50SW5NZW51Q29udGFpbnNBY3RpdmVDbGFzcykge1xuICAgICAgICAgICAgICAgICh0aGlzLl9lbGVtZW50SW5NZW51IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZih0aGlzLl9lbGVtZW50SW5NZW51Q29udGFpbnNBY3RpdmVDbGFzcykge1xuICAgICAgICAgICAgICAgICh0aGlzLl9lbGVtZW50SW5NZW51IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEVsZW1lbnRJbk1lbnUobmF2aWdhdGlvbk1lbnVFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBsaXN0T2ZMZXZlbFR3b0luTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7SFRNTF9TRUxFQ1RPUlMuTkFWSUdBVElPTl9NRU5VfSA+IGxpID4gdWwgPiBsaSA+IGFgKSBhcyBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PlxuXG4gICAgICAgIGZvcihjb25zdCBsZXZlbFR3b0VsZW1lbnQgb2YgbGlzdE9mTGV2ZWxUd29Jbk1lbnUpIHtcbiAgICAgICAgICAgIGlmKGxldmVsVHdvRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiArIHRoaXMuX2VsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaWRcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV2ZWxUd29FbGVtZW50XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBfZWxlbWVudEluTWVudUNvbnRhaW5zQWN0aXZlQ2xhc3MoKSB7XG4gICAgICAgIGlmKHRoaXMuX2VsZW1lbnRJbk1lbnUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRJbk1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7SUtvdGxpblBsYXlncm91bmRFZGl0b3J9IGZyb20gXCIuL0lLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yXCJcblxuZXhwb3J0IGNsYXNzIEVkaXRvciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb2RlQXJlYTogSFRNTERpdkVsZW1lbnQsXG4gICAgICAgIHB1YmxpYyBrb3RsaW5FZGl0b3I6IElLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yLFxuICAgICkge31cblxuICAgIHByaXZhdGUgX2hhc0JlZW5FeGVjdXRlZCA9IGZhbHNlXG4gICAgZ2V0IGhhc05vdEJlZW5FeGVjdXRlZCgpIHsgcmV0dXJuICF0aGlzLl9oYXNCZWVuRXhlY3V0ZWR9XG5cbiAgICBnZXQgaXNPblNjcmVlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZUFyZWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tID49IDAgJiYgdGhpcy5jb2RlQXJlYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPD0gd2luZG93LmlubmVySGVpZ2h0XG4gICAgfVxuXG4gICAgcHVibGljIGV4ZWN1dGUoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhc0JlZW5FeGVjdXRlZCA9IHRydWVcbiAgICAgICAgICAgIHRoaXMua290bGluRWRpdG9yLmV4ZWN1dGUoKVxuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiY2FuJ3QgZXhlY3V0ZSBrb3RsaW4gcGxheWdyb3VuZCBlZGl0b3JcIikpXG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQge0lLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yfSBmcm9tIFwiLi9JS290bGluUGxheWdyb3VuZEVkaXRvclwiXG5pbXBvcnQge0VkaXRvcn0gZnJvbSBcIi4vRWRpdG9yXCJcbmltcG9ydCB7YWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcn0gZnJvbSBcIi4uL2FkZFNjcm9sbEV2ZW50TGlzdGVuZXJcIlxuaW1wb3J0IHtIVE1MX1NFTEVDVE9SU30gZnJvbSBcIi4uL0hUTUxfU0VMRUNUT1JTXCJcblxuZXhwb3J0IGNsYXNzIEQyVktvdGxpbkVkaXRvcnMge1xuICAgIGNvbnN0cnVjdG9yKGtvdGxpbkVkaXRvcnM6IElLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yW10pIHtcblxuICAgICAgICB0aGlzLnNldEVkaXRvcnMoa290bGluRWRpdG9ycylcblxuICAgICAgICB0aGlzLnNldExpc3RlbmVyRm9yRWRpdG9yc0F1dG9FeGVjdXRpb24oKVxuXG4gICAgICAgIHRoaXMucnVuVmlzaWJsZUVkaXRvcnMoKVxuICAgIH1cblxuICAgIHByaXZhdGUgZWRpdG9yczogRWRpdG9yW10gPSBbXVxuXG4gICAgcHJpdmF0ZSBzZXRFZGl0b3JzKGtvdGxpbkVkaXRvcnM6IElLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yW10pIHtcbiAgICAgICAgZm9yKGNvbnN0IGkgaW4ga290bGluRWRpdG9ycykge1xuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0ga290bGluRWRpdG9yc1tpXVxuICAgICAgICAgICAgY29uc3QgY29kZUFyZWEgPSBlZGl0b3Iubm9kZXNbMF0ucXVlcnlTZWxlY3RvcihIVE1MX1NFTEVDVE9SUy5DT0RFX0FSRUEpXG5cbiAgICAgICAgICAgIGlmKGNvZGVBcmVhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0b3JzLnB1c2gobmV3IEVkaXRvcihjb2RlQXJlYSBhcyBIVE1MRGl2RWxlbWVudCwgZWRpdG9yKSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgY29kZUFyZWEgb2YgJHtpICsgMX0ga290bGluIGVkaXRvcmApXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldExpc3RlbmVyRm9yRWRpdG9yc0F1dG9FeGVjdXRpb24oKSB7XG4gICAgICAgIGFkZFNjcm9sbEV2ZW50TGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ydW5WaXNpYmxlRWRpdG9ycygpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBydW5WaXNpYmxlRWRpdG9ycygpIHtcbiAgICAgICAgZm9yKGNvbnN0IGVkaXRvciBvZiB0aGlzLmVkaXRvcnMpIHtcbiAgICAgICAgICAgIGlmKGVkaXRvci5pc09uU2NyZWVuICYmIGVkaXRvci5oYXNOb3RCZWVuRXhlY3V0ZWQpIHtcbiAgICAgICAgICAgICAgICBlZGl0b3IuZXhlY3V0ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0lLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yfSBmcm9tIFwiLi9JS290bGluUGxheWdyb3VuZEVkaXRvclwiXG5pbXBvcnQge0QyVktvdGxpbkVkaXRvcnN9IGZyb20gXCIuL0QyVktvdGxpbkVkaXRvcnNcIlxuXG5kZWNsYXJlIGZ1bmN0aW9uIEtvdGxpblBsYXlncm91bmQoc2VsZWN0b3I6IHN0cmluZywgZXZlbnRGdW5jdGlvbnM/OiBJRXZlbnRGdW5jdGlvbnMpOiBQcm9taXNlPElLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yW10+XG5cbmludGVyZmFjZSBJRXZlbnRGdW5jdGlvbnMge1xuICAgIGNhbGxiYWNrPzogKHRhcmdldE5vZGU6IEhUTUxFbGVtZW50LCBtb3VudE5vZGU6IEhUTUxFbGVtZW50KSA9PiB2b2lkLFxuICAgIGdldEluc3RhbmNlPzogKGluc3RhbmNlOiBJS290bGluUGxheWdyb3VuZEVkaXRvcikgPT4gdm9pZFxuICAgIG9uQ2hhbmdlPzogKGNvZGU6IHN0cmluZykgPT4gdm9pZCxcbiAgICBvblRlc3RQYXNzZWQ/OiAoKSA9PiB2b2lkLFxufVxuXG5jb25zdCBsaXN0T2ZLb3RsaW5QbGF5Z3JvdW5kRWRpdG9yczogSUtvdGxpblBsYXlncm91bmRFZGl0b3JbXSA9IFtdXG5cbmNvbnN0IGV2ZW50RnVuY3Rpb25zID0ge1xuICAgIGdldEluc3RhbmNlOiAoa290bGluUGxheWdyb3VuZEVkaXRvcjogSUtvdGxpblBsYXlncm91bmRFZGl0b3IpID0+IHtcbiAgICAgICAgbGlzdE9mS290bGluUGxheWdyb3VuZEVkaXRvcnMucHVzaChrb3RsaW5QbGF5Z3JvdW5kRWRpdG9yKVxuICAgIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRFZGl0b3JzKCkge1xuICAgIEtvdGxpblBsYXlncm91bmQoJy5rb3RsaW4tY29kZScsIGV2ZW50RnVuY3Rpb25zKS50aGVuKCgpID0+IHtcbiAgICAgICAgbmV3IEQyVktvdGxpbkVkaXRvcnMobGlzdE9mS290bGluUGxheWdyb3VuZEVkaXRvcnMpXG4gICAgfSlcbn1cbiIsImltcG9ydCB7YWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcn0gZnJvbSBcIi4vYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lclwiXG5pbXBvcnQge2dldFBhZ2VTY3JvbGxQb3NpdGlvblRvcH0gZnJvbSBcIi4vZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wXCJcbmltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuL0hUTUxfU0VMRUNUT1JTXCJcblxuXG5leHBvcnQgZnVuY3Rpb24gbWVudVBvc2l0aW9uT2JzZXJ2ZXIocmVmZXJlbmNlRWxlbWVudEZvckZpeGVkTWVudTogSFRNTEVsZW1lbnQsIHRvcEVsZW1lbnRGaXhlZE92ZXJNZW51PzogSFRNTEVsZW1lbnQpIHtcblxuICAgIGNvbnN0IEZJWEVEX01FTlVfQ0xBU1NfTkFNRSA9IFwibWVudS1maXhlZFwiXG5cbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keVxuXG4gICAgY29uc3QgaGVpZ2h0T2ZGaXhlZEVsZW1lbnRUaGF0SGlkZXNNZW51ID0gdG9wRWxlbWVudEZpeGVkT3Zlck1lbnUgPT09IHVuZGVmaW5lZCA/ICAwIDogdG9wRWxlbWVudEZpeGVkT3Zlck1lbnUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0XG5cbiAgICBhZGRTY3JvbGxFdmVudExpc3RlbmVyKCgpID0+IHtcblxuICAgICAgICBjb25zdCBwb3NpdGlvblRvcE9mUmVmRWxlbWVudCA9IHBhcnNlSW50KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyZWZlcmVuY2VFbGVtZW50Rm9yRml4ZWRNZW51KS5wYWRkaW5nVG9wIGFzIHN0cmluZyApXG5cbiAgICAgICAgY29uc3QgcmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUgPSBwb3NpdGlvblRvcE9mUmVmRWxlbWVudCAtIGhlaWdodE9mRml4ZWRFbGVtZW50VGhhdEhpZGVzTWVudVxuXG4gICAgICAgIGlmKGdldFBhZ2VTY3JvbGxQb3NpdGlvblRvcCgpID49IHJlZlBvc2l0aW9uRm9yRml4ZWRNZW51ICYmICFib2R5LmNsYXNzTGlzdC5jb250YWlucyhGSVhFRF9NRU5VX0NMQVNTX05BTUUpKXtcbiAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZChGSVhFRF9NRU5VX0NMQVNTX05BTUUpXG4gICAgICAgIH0gZWxzZSBpZiAoZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wKCkgPD0gcmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoRklYRURfTUVOVV9DTEFTU19OQU1FKSkge1xuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKEZJWEVEX01FTlVfQ0xBU1NfTkFNRSlcbiAgICAgICAgfVxuXG4gICAgfSlcbn1cbiIsImltcG9ydCB7bWVudVBvc2l0aW9uT2JzZXJ2ZXJ9IGZyb20gXCIuL21lbnVQb3NpdGlvbk9ic2VydmVyXCJcbmltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuL0hUTUxfU0VMRUNUT1JTXCJcbmltcG9ydCB7c2V0Q3VycmVudFNlY3Rpb25OYW1lfSBmcm9tIFwiLi9uYXZpZ2F0aW9uTWVudS9zZXRDdXJyZW50U2VjdGlvbk5hbWVcIlxuaW1wb3J0IHtzZXROYXZpZ2F0aW9uTWVudX0gZnJvbSBcIi4vbmF2aWdhdGlvbk1lbnUvc2V0TmF2aWdhdGlvbk1lbnVcIlxuaW1wb3J0IHtzZXRFZGl0b3JzfSBmcm9tIFwiLi9lZGl0b3Ivc2V0RWRpdG9yc1wiXG5cbnNldEVkaXRvcnMoKVxuXG5tZW51UG9zaXRpb25PYnNlcnZlcihcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEhUTUxfU0VMRUNUT1JTLkNPTlRFTlQpIGFzIEhUTUxFbGVtZW50LFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuVE9QX0hFQURFUikgYXMgSFRNTEVsZW1lbnQsXG4pXG5cblxuc2V0Q3VycmVudFNlY3Rpb25OYW1lKClcblxuc2V0TmF2aWdhdGlvbk1lbnUoKSIsImltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuLi9IVE1MX1NFTEVDVE9SU1wiXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U2VjdGlvbk5hbWUoKSB7XG4gICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuQ1VSUkVOVF9TRUNUSU9OX05BTUUpIGFzIEhUTUxFbGVtZW50KS5pbm5lckhUTUwgPSBnZXRDdXJyZW50U2VjdGlvbk5hbWUoKVxufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50U2VjdGlvbk5hbWUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYWdlVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgxXCIpXG4gICAgaWYocGFnZVRpdGxlRWxlbWVudCAhPT0gbnVsbCApIHtcbiAgICAgICAgcmV0dXJuIHBhZ2VUaXRsZUVsZW1lbnQuaW5uZXJIVE1MXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9