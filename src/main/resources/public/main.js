!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){},function(e,t,n){e.exports=n.p+"images/logo-play.png"},function(e,t,n){e.exports=n.p+"images/logo-negative.png"},function(e,t,n){e.exports=n.p+"images/go-back-to-main-page.png"},function(e,t,n){"use strict";function o(e){let t=!1;window.addEventListener("scroll",n=>{t||window.requestAnimationFrame(()=>{e(),t=!1}),t=!0})}function i(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var r;function s(e){let t=!0;for(const n of e)n.isActive&&t?(t=!1,n.classname="active"):n.classname="unactive"}n.r(t),function(e){e.CODE_AREA=".code-area",e.CONTENT="#d2v-content",e.CURRENT_SECTION_NAME="#current-section-name",e.TOP_HEADER="#d2v-header",e.NAVIGATION_MENU="#site-navigation"}(r||(r={}));class c{constructor(e,t){this._element=e,this._elementInMenu=this.getElementInMenu(t)}get isActive(){return this._element.getBoundingClientRect().top<=window.innerHeight/2}set classname(e){"active"===e?this._elementInMenuContainsActiveClass||this._elementInMenu.classList.add("active"):this._elementInMenuContainsActiveClass&&this._elementInMenu.classList.remove("active")}getElementInMenu(e){const t=document.querySelectorAll(`${r.NAVIGATION_MENU} > li > ul > li > a`);for(const e of t)if(e.getAttribute("href")==="#"+this._element.getAttribute("id"))return e}get _elementInMenuContainsActiveClass(){return void 0!==this._elementInMenu&&this._elementInMenu.classList.contains("active")}}class u{constructor(e){this._editors=[],this._editors=e,this._setListenerForEditorsAutoExecution()}runVisibleEditors(){for(const e of this._editors)e.isOnScreen&&e.hasNotBeenExecuted&&e.execute()}_setListenerForEditorsAutoExecution(){o(()=>{this.runVisibleEditors()})}}function l(e,t,n){const o=document.createElement(e);if("string"==typeof t)o.innerHTML=t;else if(t)for(const e of t)o.appendChild(e);return n&&(o.className=n),o}class a{constructor(e){this.MORE_THAN_ONCE_CODE_CHANGED_CLASSNAME="more-than-once-code-changed",this.SHORTCUT_INFO_CLASSNAME="shortcut-info compiler-info",this._hasBeenExecuted=!1,this._eventFunctions={getInstance:e=>{this._KotlinPlaygroundEditor=e},onChange:e=>{this.changedCounter++,2===this.changedCounter&&this.kotlinEditorContainer&&(this.kotlinEditorContainer.appendChild(l("div",[l("div","ctrl + r : run"),l("div","ctrl + space : code completion")],this.SHORTCUT_INFO_CLASSNAME)),this.kotlinEditorContainer.classList.add(this.MORE_THAN_ONCE_CODE_CHANGED_CLASSNAME))}},this.changedCounter=0,this._selector=e}init(){return new Promise(e=>{KotlinPlayground(this._selector,this._eventFunctions).then(()=>{if(this._KotlinPlaygroundEditor){this._kotlinEditorContainer=this._KotlinPlaygroundEditor.nodes[0];const e=this._kotlinEditorContainer.querySelector(r.CODE_AREA);null!==e&&e instanceof HTMLElement&&(this._codeArea=e)}e(this)})})}get kotlinEditorContainer(){return this._kotlinEditorContainer}get codeArea(){return this._codeArea}get bottom_of_codeArea_is_above_bottom_of_screen(){return!!this.codeArea&&this.codeArea.getBoundingClientRect().bottom>=0}get bottom_of_codeArea_is_below_top_of_screen(){return!!this.codeArea&&this.codeArea.getBoundingClientRect().bottom<=window.innerHeight}get hasNotBeenExecuted(){return!this._hasBeenExecuted}get isOnScreen(){if(this._KotlinPlaygroundEditor)return this.bottom_of_codeArea_is_above_bottom_of_screen&&this.bottom_of_codeArea_is_below_top_of_screen}execute(){return new Promise((e,t)=>{this._KotlinPlaygroundEditor&&(this._hasBeenExecuted=!0,this._KotlinPlaygroundEditor.execute()),e(),t(new Error("can't execute kotlin playground editor"))})}}new Promise(e=>{const t=document.querySelectorAll(".kotlin-code"),n=[];let o=0;for(const e of t)e instanceof HTMLElement&&n.push(new a(e));for(const t of n)t.init().then(()=>{++o===n.length&&e(new u(n))})}).then(e=>{e.runVisibleEditors()}),function(e,t){const n=document.body,r=void 0===t?0:t.getBoundingClientRect().height;o(()=>{const t=parseInt(window.getComputedStyle(e).paddingTop)-r;i()>=t&&!n.classList.contains("menu-fixed")?n.classList.add("menu-fixed"):i()<=t&&n.classList.contains("menu-fixed")&&n.classList.remove("menu-fixed")})}(document.querySelector(r.CONTENT),document.querySelector(r.TOP_HEADER)),document.querySelector(r.CURRENT_SECTION_NAME).innerHTML=function(){const e=document.querySelector("h1");return null!==e?e.innerHTML:""}(),new Promise((e,t)=>{const n=[],o=document.querySelectorAll(`${r.CONTENT} h2`),i=document.querySelector(`${r.NAVIGATION_MENU}`);for(const e of o)n.push(new c(e,i));e(n.reverse()),t(new Error("can't get list of level two in navigation menu"))}).then(e=>{s(e),o(()=>{s(e)})});n(0),n(1),n(2),n(3)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9sb2dvLXBsYXkucG5nIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvbG9nby1uZWdhdGl2ZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9nby1iYWNrLXRvLW1haW4tcGFnZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nZXRQYWdlU2Nyb2xsUG9zaXRpb25Ub3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvSFRNTF9TRUxFQ1RPUlMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvbmF2aWdhdGlvbi9zZXROYXZpZ2F0aW9uTWVudS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lZGl0b3IvRWRpdG9yTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy90b29scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lZGl0b3IvRWRpdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2VkaXRvci9zZXRFZGl0b3JzTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL25hdmlnYXRpb24vc2V0TWVudVBvc2l0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL25hdmlnYXRpb24vc2V0Q3VycmVudFNlY3Rpb25OYW1lLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lciIsImZ1biIsInRpY2tpbmciLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJnZXRQYWdlU2Nyb2xsUG9zaXRpb25Ub3AiLCJ1bmRlZmluZWQiLCJwYWdlWU9mZnNldCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiYm9keSIsInBhcmVudE5vZGUiLCJzY3JvbGxUb3AiLCJIVE1MX1NFTEVDVE9SUyIsInVwZGF0ZUNoYXB0ZXJTdGF0dUluTmF2aWdhdGlvbk1lbnUiLCJsaXN0T2ZUaXRsZUxldmVsVHdvIiwibGFzdFRpdGxlSXNOb3RGb3VuZCIsInRpdGxlTGV2ZWxUd28iLCJpc0FjdGl2ZSIsImNsYXNzbmFtZSIsInNldE5hdmlnYXRpb25NZW51X0NoYXB0ZXIiLCJbb2JqZWN0IE9iamVjdF0iLCJlbGVtZW50IiwibmF2aWdhdGlvbk1lbnVFbGVtZW50IiwidGhpcyIsIl9lbGVtZW50IiwiX2VsZW1lbnRJbk1lbnUiLCJnZXRFbGVtZW50SW5NZW51IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiaW5uZXJIZWlnaHQiLCJfZWxlbWVudEluTWVudUNvbnRhaW5zQWN0aXZlQ2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJsaXN0T2ZMZXZlbFR3b0luTWVudSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJOQVZJR0FUSU9OX01FTlUiLCJsZXZlbFR3b0VsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJjb250YWlucyIsIkVkaXRvck1hbmFnZXJfRWRpdG9yTWFuYWdlciIsImtvdGxpbkVkaXRvcnMiLCJfZWRpdG9ycyIsIl9zZXRMaXN0ZW5lckZvckVkaXRvcnNBdXRvRXhlY3V0aW9uIiwiZWRpdG9yIiwiaXNPblNjcmVlbiIsImhhc05vdEJlZW5FeGVjdXRlZCIsImV4ZWN1dGUiLCJydW5WaXNpYmxlRWRpdG9ycyIsImNyZWF0ZUhUTUxFbGVtZW50IiwidGFnTmFtZSIsImNvbnRlbnQiLCJuZXdFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImh0bWxFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjbGFzc05hbWUiLCJFZGl0b3JfRWRpdG9yIiwic2VsZWN0b3IiLCJNT1JFX1RIQU5fT05DRV9DT0RFX0NIQU5HRURfQ0xBU1NOQU1FIiwiU0hPUlRDVVRfSU5GT19DTEFTU05BTUUiLCJfaGFzQmVlbkV4ZWN1dGVkIiwiX2V2ZW50RnVuY3Rpb25zIiwiZ2V0SW5zdGFuY2UiLCJfS290bGluUGxheWdyb3VuZEVkaXRvciIsIm9uQ2hhbmdlIiwiY29kZSIsImNoYW5nZWRDb3VudGVyIiwia290bGluRWRpdG9yQ29udGFpbmVyIiwiX3NlbGVjdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJLb3RsaW5QbGF5Z3JvdW5kIiwidGhlbiIsIl9rb3RsaW5FZGl0b3JDb250YWluZXIiLCJub2RlcyIsImNvZGVBcmVhIiwicXVlcnlTZWxlY3RvciIsIkNPREVfQVJFQSIsIkhUTUxFbGVtZW50IiwiX2NvZGVBcmVhIiwiYm90dG9tX29mX2NvZGVBcmVhX2lzX2Fib3ZlX2JvdHRvbV9vZl9zY3JlZW4iLCJib3R0b20iLCJib3R0b21fb2ZfY29kZUFyZWFfaXNfYmVsb3dfdG9wX29mX3NjcmVlbiIsInJlamVjdCIsIkVycm9yIiwiY29kZUVsZW1lbnRzRm9yS290bGluUGxheWdyb3VuZEVkaXRvckluaXQiLCJsaXN0T2ZFZGl0b3IiLCJudW1iZXJPZkVkaXRvcnNJbml0aWFsaXNlZCIsImNvZGVFbGVtZW50IiwicHVzaCIsImluaXQiLCJsZW5ndGgiLCJlZGl0b3JNYW5hZ2VyIiwicmVmZXJlbmNlRWxlbWVudEZvckZpeGVkTWVudSIsInRvcEVsZW1lbnRGaXhlZE92ZXJNZW51IiwiaGVpZ2h0T2ZGaXhlZEVsZW1lbnRUaGF0SGlkZXNNZW51IiwiaGVpZ2h0IiwicmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJwYWRkaW5nVG9wIiwic2V0TWVudVBvc2l0aW9uIiwiQ09OVEVOVCIsIlRPUF9IRUFERVIiLCJDVVJSRU5UX1NFQ1RJT05fTkFNRSIsInBhZ2VUaXRsZUVsZW1lbnQiLCJnZXRDdXJyZW50U2VjdGlvbk5hbWUiLCJsaXN0VG9SZXR1cm4iLCJUSVRMRV9UV09fRUxFTUVOVFMiLCJOQVZJR0FUSU9OX01FTlVfRUxFTUVOVCIsIm5hdmlnYXRpb25Ud29FbGVtZW50IiwicmV2ZXJzZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFB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RSxjQUFjbEUsRUFBZTRGLFNBQ3RDakcsU0FBU3VFLGNBQWNsRSxFQUFlNkYsYUVUckNsRyxTQUFTdUUsY0FBY2xFLEVBQWU4RixzQkFBc0NwRCxVQUdqRixXQUNJLE1BQU1xRCxFQUFtQnBHLFNBQVN1RSxjQUFjLE1BQ2hELE9BQXdCLE9BQXJCNkIsRUFDUUEsRUFBaUJyRCxVQUVqQixHQVI4RXNELEdQd0JsRixJQUFJckMsUUFBUSxDQUFDQyxFQUFTYSxLQUN6QixNQUFNd0IsS0FFQUMsRUFBcUJ2RyxTQUFTNEIsb0JBQW9CdkIsRUFBZTRGLGNBQ2pFTyxFQUEwQnhHLFNBQVN1RSxpQkFBaUJsRSxFQUFld0IsbUJBRXpFLElBQUksTUFBTTRFLEtBQXdCRixFQUM5QkQsRUFBYWxCLEtBQUssSUFBSXhFLEVBQVE2RixFQUFzQkQsSUFHeER2QyxFQUFRcUMsRUFBYUksV0FFckI1QixFQUFPLElBQUlDLE1BQU0scURBbkNHWixLQUFNNUYsSUFDMUIrQixFQUFtQy9CLEdBRW5DZSxFQUF1QixLQUNuQmdCLEVBQW1DL0IiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9sb2dvLXBsYXkucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2xvZ28tbmVnYXRpdmUucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2dvLWJhY2stdG8tbWFpbi1wYWdlLnBuZ1wiOyIsImV4cG9ydCBmdW5jdGlvbiBhZGRTY3JvbGxFdmVudExpc3RlbmVyKGZ1bjogKCkgPT4gdm9pZCkge1xuICAgIGxldCB0aWNraW5nID0gZmFsc2VcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoZXYpID0+IHtcbiAgICAgICAgaWYoIXRpY2tpbmcpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZ1bigpXG4gICAgICAgICAgICAgICAgdGlja2luZyA9IGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHRpY2tpbmcgPSB0cnVlXG4gICAgfSlcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBnZXRQYWdlU2Nyb2xsUG9zaXRpb25Ub3AoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHdpbmRvdy5wYWdlWU9mZnNldCAhPT0gdW5kZWZpbmVkKSA/IHdpbmRvdy5wYWdlWU9mZnNldCA6ICgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5KSBhcyBIVE1MRWxlbWVudCkuc2Nyb2xsVG9wXG59IiwiZXhwb3J0IGVudW0gSFRNTF9TRUxFQ1RPUlMge1xuICAgIENPREVfQVJFQSAgICAgICAgICAgICAgID0gXCIuY29kZS1hcmVhXCIsXG4gICAgQ09OVEVOVCAgICAgICAgICAgICAgICAgPSBcIiNkMnYtY29udGVudFwiLFxuICAgIENVUlJFTlRfU0VDVElPTl9OQU1FICAgID0gXCIjY3VycmVudC1zZWN0aW9uLW5hbWVcIixcbiAgICBUT1BfSEVBREVSICAgICAgICAgICAgICA9IFwiI2Qydi1oZWFkZXJcIixcbiAgICBOQVZJR0FUSU9OX01FTlUgICAgICAgICA9IFwiI3NpdGUtbmF2aWdhdGlvblwiXG59IiwiaW1wb3J0IHtIVE1MX1NFTEVDVE9SU30gZnJvbSBcIi4uL0hUTUxfU0VMRUNUT1JTXCJcbmltcG9ydCB7YWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcn0gZnJvbSBcIi4uL2FkZFNjcm9sbEV2ZW50TGlzdGVuZXJcIlxuXG5leHBvcnQgZnVuY3Rpb24gc2V0TmF2aWdhdGlvbk1lbnUoKSB7XG4gICAgZ2VuZXJhdGVMaXN0T2ZDaGFwdGVyKCkudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgdXBkYXRlQ2hhcHRlclN0YXR1SW5OYXZpZ2F0aW9uTWVudSh2YWx1ZSlcblxuICAgICAgICBhZGRTY3JvbGxFdmVudExpc3RlbmVyKCgpID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZUNoYXB0ZXJTdGF0dUluTmF2aWdhdGlvbk1lbnUodmFsdWUpXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2hhcHRlclN0YXR1SW5OYXZpZ2F0aW9uTWVudShsaXN0T2ZUaXRsZUxldmVsVHdvOiBDaGFwdGVyW10pIHtcbiAgICBsZXQgbGFzdFRpdGxlSXNOb3RGb3VuZCA9IHRydWVcblxuICAgIGZvcihjb25zdCB0aXRsZUxldmVsVHdvIG9mIGxpc3RPZlRpdGxlTGV2ZWxUd28pIHtcbiAgICAgICAgaWYodGl0bGVMZXZlbFR3by5pc0FjdGl2ZSAmJiBsYXN0VGl0bGVJc05vdEZvdW5kKSB7XG4gICAgICAgICAgICBsYXN0VGl0bGVJc05vdEZvdW5kID0gZmFsc2VcbiAgICAgICAgICAgIHRpdGxlTGV2ZWxUd28uY2xhc3NuYW1lID0gXCJhY3RpdmVcIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGl0bGVMZXZlbFR3by5jbGFzc25hbWUgPSBcInVuYWN0aXZlXCJcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVMaXN0T2ZDaGFwdGVyKCk6IFByb21pc2U8Q2hhcHRlcltdPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgbGlzdFRvUmV0dXJuID0gW11cblxuICAgICAgICBjb25zdCBUSVRMRV9UV09fRUxFTUVOVFMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke0hUTUxfU0VMRUNUT1JTLkNPTlRFTlR9IGgyYCkgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD5cbiAgICAgICAgY29uc3QgTkFWSUdBVElPTl9NRU5VX0VMRU1FTlQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke0hUTUxfU0VMRUNUT1JTLk5BVklHQVRJT05fTUVOVX1gKSBhcyBIVE1MRWxlbWVudFxuXG4gICAgICAgIGZvcihjb25zdCBuYXZpZ2F0aW9uVHdvRWxlbWVudCBvZiBUSVRMRV9UV09fRUxFTUVOVFMpIHtcbiAgICAgICAgICAgIGxpc3RUb1JldHVybi5wdXNoKG5ldyBDaGFwdGVyKG5hdmlnYXRpb25Ud29FbGVtZW50LCBOQVZJR0FUSU9OX01FTlVfRUxFTUVOVCkpXG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKGxpc3RUb1JldHVybi5yZXZlcnNlKCkpXG5cbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImNhbid0IGdldCBsaXN0IG9mIGxldmVsIHR3byBpbiBuYXZpZ2F0aW9uIG1lbnVcIikpXG4gICAgfSlcbn1cblxuY2xhc3MgQ2hhcHRlciB7XG4gICAgcHJpdmF0ZSBfZWxlbWVudDogSFRNTEVsZW1lbnRcblxuICAgIHByaXZhdGUgX2VsZW1lbnRJbk1lbnU6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkXG5cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgbmF2aWdhdGlvbk1lbnVFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudFxuICAgICAgICB0aGlzLl9lbGVtZW50SW5NZW51ID0gdGhpcy5nZXRFbGVtZW50SW5NZW51KG5hdmlnYXRpb25NZW51RWxlbWVudClcbiAgICB9XG5cbiAgICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCA8PSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyXG4gICAgfVxuXG4gICAgc2V0IGNsYXNzbmFtZShjbGFzc25hbWU6IFwiYWN0aXZlXCJ8XCJ1bmFjdGl2ZVwiKSB7XG4gICAgICAgIGlmKGNsYXNzbmFtZSA9PT0gXCJhY3RpdmVcIikge1xuICAgICAgICAgICAgaWYoISB0aGlzLl9lbGVtZW50SW5NZW51Q29udGFpbnNBY3RpdmVDbGFzcykge1xuICAgICAgICAgICAgICAgICh0aGlzLl9lbGVtZW50SW5NZW51IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZih0aGlzLl9lbGVtZW50SW5NZW51Q29udGFpbnNBY3RpdmVDbGFzcykge1xuICAgICAgICAgICAgICAgICh0aGlzLl9lbGVtZW50SW5NZW51IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEVsZW1lbnRJbk1lbnUobmF2aWdhdGlvbk1lbnVFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBsaXN0T2ZMZXZlbFR3b0luTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7SFRNTF9TRUxFQ1RPUlMuTkFWSUdBVElPTl9NRU5VfSA+IGxpID4gdWwgPiBsaSA+IGFgKSBhcyBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PlxuXG4gICAgICAgIGZvcihjb25zdCBsZXZlbFR3b0VsZW1lbnQgb2YgbGlzdE9mTGV2ZWxUd29Jbk1lbnUpIHtcbiAgICAgICAgICAgIGlmKGxldmVsVHdvRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiArIHRoaXMuX2VsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaWRcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV2ZWxUd29FbGVtZW50XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBfZWxlbWVudEluTWVudUNvbnRhaW5zQWN0aXZlQ2xhc3MoKSB7XG4gICAgICAgIGlmKHRoaXMuX2VsZW1lbnRJbk1lbnUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRJbk1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7S290bGluUGxheWdyb3VuZH0gZnJvbSBcIi4vS290bGluUGxheWdyb3VuZFwiXG5pbXBvcnQge0VkaXRvcn0gZnJvbSBcIi4vRWRpdG9yXCJcbmltcG9ydCB7YWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcn0gZnJvbSBcIi4uL2FkZFNjcm9sbEV2ZW50TGlzdGVuZXJcIlxuaW1wb3J0IHtIVE1MX1NFTEVDVE9SU30gZnJvbSBcIi4uL0hUTUxfU0VMRUNUT1JTXCJcblxuZXhwb3J0IGNsYXNzIEVkaXRvck1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKGtvdGxpbkVkaXRvcnM6IEVkaXRvcltdKSB7XG5cbiAgICAgICAgdGhpcy5fZWRpdG9ycyA9IGtvdGxpbkVkaXRvcnNcblxuICAgICAgICB0aGlzLl9zZXRMaXN0ZW5lckZvckVkaXRvcnNBdXRvRXhlY3V0aW9uKClcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuVmlzaWJsZUVkaXRvcnMoKSB7XG4gICAgICAgIGZvcihjb25zdCBlZGl0b3Igb2YgdGhpcy5fZWRpdG9ycykge1xuICAgICAgICAgICAgaWYoZWRpdG9yLmlzT25TY3JlZW4gJiYgZWRpdG9yLmhhc05vdEJlZW5FeGVjdXRlZCkge1xuICAgICAgICAgICAgICAgIGVkaXRvci5leGVjdXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VkaXRvcnM6IEVkaXRvcltdID0gW11cblxuICAgIHByaXZhdGUgX3NldExpc3RlbmVyRm9yRWRpdG9yc0F1dG9FeGVjdXRpb24oKSB7XG4gICAgICAgIGFkZFNjcm9sbEV2ZW50TGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ydW5WaXNpYmxlRWRpdG9ycygpXG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhUTUxFbGVtZW50KHRhZ05hbWU6IGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcCwgY29udGVudD86IHN0cmluZyB8IEhUTUxFbGVtZW50W10sIGNsYXNzbmFtZT86IHN0cmluZykge1xuICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpXG5cbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbmV3RWxlbWVudC5pbm5lckhUTUwgPSBjb250ZW50XG4gICAgfSBlbHNlIGlmIChjb250ZW50KSB7XG4gICAgICAgIGZvcihjb25zdCBodG1sRWxlbWVudCBvZiBjb250ZW50KSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LmFwcGVuZENoaWxkKGh0bWxFbGVtZW50KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYoY2xhc3NuYW1lKSBuZXdFbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzbmFtZVxuXG4gICAgcmV0dXJuIG5ld0VsZW1lbnRcbn0iLCJpbXBvcnQge0tvdGxpblBsYXlncm91bmR9IGZyb20gXCIuL0tvdGxpblBsYXlncm91bmRcIlxuaW1wb3J0IHtIVE1MX1NFTEVDVE9SU30gZnJvbSBcIi4uL0hUTUxfU0VMRUNUT1JTXCJcbmltcG9ydCB7Y3JlYXRlSFRNTEVsZW1lbnR9IGZyb20gXCIuLi90b29sc1wiXG5cbmRlY2xhcmUgZnVuY3Rpb24gS290bGluUGxheWdyb3VuZChzZWxlY3Rvcjogc3RyaW5nIHzCoEhUTUxFbGVtZW50LCBldmVudEZ1bmN0aW9ucz86IEtvdGxpblBsYXlncm91bmQuSUV2ZW50RnVuY3Rpb25zKTogUHJvbWlzZTxLb3RsaW5QbGF5Z3JvdW5kLklFZGl0b3JbXT5cblxuZXhwb3J0IGNsYXNzIEVkaXRvciB7XG4gICAgcHJpdmF0ZSBNT1JFX1RIQU5fT05DRV9DT0RFX0NIQU5HRURfQ0xBU1NOQU1FID0gXCJtb3JlLXRoYW4tb25jZS1jb2RlLWNoYW5nZWRcIlxuICAgIHByaXZhdGUgU0hPUlRDVVRfSU5GT19DTEFTU05BTUUgPSBcInNob3J0Y3V0LWluZm8gY29tcGlsZXItaW5mb1wiXG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgc2VsZWN0b3I6IHN0cmluZyB8IEhUTUxFbGVtZW50LFxuICAgICkge1xuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfc2VsZWN0b3I6IHN0cmluZyB8IEhUTUxFbGVtZW50XG5cbiAgICBwdWJsaWMgaW5pdCgpOiBQcm9taXNlPEVkaXRvcj4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBLb3RsaW5QbGF5Z3JvdW5kKHRoaXMuX3NlbGVjdG9yLCB0aGlzLl9ldmVudEZ1bmN0aW9ucykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5fS290bGluUGxheWdyb3VuZEVkaXRvcikge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2tvdGxpbkVkaXRvckNvbnRhaW5lciA9IHRoaXMuX0tvdGxpblBsYXlncm91bmRFZGl0b3Iubm9kZXNbMF1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2RlQXJlYSA9IHRoaXMuX2tvdGxpbkVkaXRvckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKEhUTUxfU0VMRUNUT1JTLkNPREVfQVJFQSlcblxuICAgICAgICAgICAgICAgICAgICBpZihjb2RlQXJlYSAhPT0gbnVsbCAmJiBjb2RlQXJlYSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2RlQXJlYSA9IGNvZGVBcmVhXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKCB0aGlzIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfa290bGluRWRpdG9yQ29udGFpbmVyPzogSFRNTEVsZW1lbnRcbiAgICBnZXQga290bGluRWRpdG9yQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa290bGluRWRpdG9yQ29udGFpbmVyXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY29kZUFyZWE/OiBIVE1MRWxlbWVudFxuICAgIHB1YmxpYyBnZXQgY29kZUFyZWEoKSB7cmV0dXJuIHRoaXMuX2NvZGVBcmVhfVxuXG4gICAgcHVibGljIGdldCBib3R0b21fb2ZfY29kZUFyZWFfaXNfYWJvdmVfYm90dG9tX29mX3NjcmVlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZUFyZWEgPyB0aGlzLmNvZGVBcmVhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA+PSAwIDogZmFsc2VcbiAgICB9XG4gICAgcHVibGljIGdldCBib3R0b21fb2ZfY29kZUFyZWFfaXNfYmVsb3dfdG9wX29mX3NjcmVlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZUFyZWEgPyB0aGlzLmNvZGVBcmVhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA8PSB3aW5kb3cuaW5uZXJIZWlnaHQgOiBmYWxzZVxuICAgIH1cblxuICAgIHByaXZhdGUgX2hhc0JlZW5FeGVjdXRlZCA9IGZhbHNlXG4gICAgcHVibGljIGdldCBoYXNOb3RCZWVuRXhlY3V0ZWQoKSB7IHJldHVybiAhdGhpcy5faGFzQmVlbkV4ZWN1dGVkfVxuXG4gICAgcHVibGljIGdldCBpc09uU2NyZWVuKCkge1xuICAgICAgICBpZiAodGhpcy5fS290bGluUGxheWdyb3VuZEVkaXRvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tX29mX2NvZGVBcmVhX2lzX2Fib3ZlX2JvdHRvbV9vZl9zY3JlZW4gJiYgdGhpcy5ib3R0b21fb2ZfY29kZUFyZWFfaXNfYmVsb3dfdG9wX29mX3NjcmVlblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGV4ZWN1dGUoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmKCB0aGlzLl9Lb3RsaW5QbGF5Z3JvdW5kRWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFzQmVlbkV4ZWN1dGVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMuX0tvdGxpblBsYXlncm91bmRFZGl0b3IuZXhlY3V0ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJjYW4ndCBleGVjdXRlIGtvdGxpbiBwbGF5Z3JvdW5kIGVkaXRvclwiKSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZXZlbnRGdW5jdGlvbnM6IEtvdGxpblBsYXlncm91bmQuSUV2ZW50RnVuY3Rpb25zID0ge1xuICAgICAgICBnZXRJbnN0YW5jZTogKGVkaXRvcjogS290bGluUGxheWdyb3VuZC5JRWRpdG9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9Lb3RsaW5QbGF5Z3JvdW5kRWRpdG9yID0gZWRpdG9yXG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2hhbmdlOiAoY29kZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWRDb3VudGVyKytcblxuICAgICAgICAgICAgaWYodGhpcy5jaGFuZ2VkQ291bnRlciA9PT0gMikge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMua290bGluRWRpdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua290bGluRWRpdG9yQ29udGFpbmVyLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlSFRNTEVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUhUTUxFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY3RybCArIHIgOiBydW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVIVE1MRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImN0cmwgKyBzcGFjZSA6IGNvZGUgY29tcGxldGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuU0hPUlRDVVRfSU5GT19DTEFTU05BTUVcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua290bGluRWRpdG9yQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGhpcy5NT1JFX1RIQU5fT05DRV9DT0RFX0NIQU5HRURfQ0xBU1NOQU1FKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBfS290bGluUGxheWdyb3VuZEVkaXRvcj86IEtvdGxpblBsYXlncm91bmQuSUVkaXRvclxuXG4gICAgcHJpdmF0ZSBjaGFuZ2VkQ291bnRlciA9IDBcbn0iLCJpbXBvcnQge0tvdGxpblBsYXlncm91bmR9IGZyb20gXCIuL0tvdGxpblBsYXlncm91bmRcIlxuaW1wb3J0IHtFZGl0b3JNYW5hZ2VyfSBmcm9tIFwiLi9FZGl0b3JNYW5hZ2VyXCJcbmltcG9ydCB7RWRpdG9yfSBmcm9tIFwiLi9FZGl0b3JcIlxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RWRpdG9yc01hbmFnZXIoKTogUHJvbWlzZTxFZGl0b3JNYW5hZ2VyPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25zdCBjb2RlRWxlbWVudHNGb3JLb3RsaW5QbGF5Z3JvdW5kRWRpdG9ySW5pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5rb3RsaW4tY29kZScpXG5cbiAgICAgICAgY29uc3QgbGlzdE9mRWRpdG9yOiBFZGl0b3JbXSA9IFtdXG5cbiAgICAgICAgbGV0IG51bWJlck9mRWRpdG9yc0luaXRpYWxpc2VkID0gMFxuXG4gICAgICAgIGZvcihjb25zdCBjb2RlRWxlbWVudCBvZiBjb2RlRWxlbWVudHNGb3JLb3RsaW5QbGF5Z3JvdW5kRWRpdG9ySW5pdCkge1xuICAgICAgICAgICAgaWYoY29kZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGxpc3RPZkVkaXRvci5wdXNoKG5ldyBFZGl0b3IoY29kZUVsZW1lbnQpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGNvbnN0IGVkaXRvciBvZiBsaXN0T2ZFZGl0b3IpIHtcbiAgICAgICAgICAgIGVkaXRvci5pbml0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZFZGl0b3JzSW5pdGlhbGlzZWQrK1xuICAgICAgICAgICAgICAgIGlmKG51bWJlck9mRWRpdG9yc0luaXRpYWxpc2VkID09PSBsaXN0T2ZFZGl0b3IubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRWRpdG9yTWFuYWdlcihsaXN0T2ZFZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn1cbiIsImltcG9ydCB7c2V0TWVudVBvc2l0aW9ufSBmcm9tIFwiLi9uYXZpZ2F0aW9uL3NldE1lbnVQb3NpdGlvblwiXG5pbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi9IVE1MX1NFTEVDVE9SU1wiXG5pbXBvcnQge3NldEN1cnJlbnRTZWN0aW9uTmFtZX0gZnJvbSBcIi4vbmF2aWdhdGlvbi9zZXRDdXJyZW50U2VjdGlvbk5hbWVcIlxuaW1wb3J0IHtzZXROYXZpZ2F0aW9uTWVudX0gZnJvbSBcIi4vbmF2aWdhdGlvbi9zZXROYXZpZ2F0aW9uTWVudVwiXG5pbXBvcnQge3NldEVkaXRvcnNNYW5hZ2VyfSBmcm9tIFwiLi9lZGl0b3Ivc2V0RWRpdG9yc01hbmFnZXJcIlxuXG5zZXRFZGl0b3JzTWFuYWdlcigpLnRoZW4oKGVkaXRvck1hbmFnZXIpID0+IHtcbiAgICBlZGl0b3JNYW5hZ2VyLnJ1blZpc2libGVFZGl0b3JzKClcbn0pXG5cbnNldE1lbnVQb3NpdGlvbihcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEhUTUxfU0VMRUNUT1JTLkNPTlRFTlQpIGFzIEhUTUxFbGVtZW50LFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuVE9QX0hFQURFUikgYXMgSFRNTEVsZW1lbnQsXG4pXG5cblxuc2V0Q3VycmVudFNlY3Rpb25OYW1lKClcblxuc2V0TmF2aWdhdGlvbk1lbnUoKSIsImltcG9ydCB7YWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcn0gZnJvbSBcIi4uL2FkZFNjcm9sbEV2ZW50TGlzdGVuZXJcIlxuaW1wb3J0IHtnZXRQYWdlU2Nyb2xsUG9zaXRpb25Ub3B9IGZyb20gXCIuLi9nZXRQYWdlU2Nyb2xsUG9zaXRpb25Ub3BcIlxuaW1wb3J0IHtIVE1MX1NFTEVDVE9SU30gZnJvbSBcIi4uL0hUTUxfU0VMRUNUT1JTXCJcblxuXG5leHBvcnQgZnVuY3Rpb24gc2V0TWVudVBvc2l0aW9uKHJlZmVyZW5jZUVsZW1lbnRGb3JGaXhlZE1lbnU6IEhUTUxFbGVtZW50LCB0b3BFbGVtZW50Rml4ZWRPdmVyTWVudT86IEhUTUxFbGVtZW50KSB7XG5cbiAgICBjb25zdCBGSVhFRF9NRU5VX0NMQVNTX05BTUUgPSBcIm1lbnUtZml4ZWRcIlxuXG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHlcblxuICAgIGNvbnN0IGhlaWdodE9mRml4ZWRFbGVtZW50VGhhdEhpZGVzTWVudSA9IHRvcEVsZW1lbnRGaXhlZE92ZXJNZW51ID09PSB1bmRlZmluZWQgPyAgMCA6IHRvcEVsZW1lbnRGaXhlZE92ZXJNZW51LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodFxuXG4gICAgYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcigoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgcG9zaXRpb25Ub3BPZlJlZkVsZW1lbnQgPSBwYXJzZUludCggd2luZG93LmdldENvbXB1dGVkU3R5bGUocmVmZXJlbmNlRWxlbWVudEZvckZpeGVkTWVudSkucGFkZGluZ1RvcCBhcyBzdHJpbmcgKVxuXG4gICAgICAgIGNvbnN0IHJlZlBvc2l0aW9uRm9yRml4ZWRNZW51ID0gcG9zaXRpb25Ub3BPZlJlZkVsZW1lbnQgLSBoZWlnaHRPZkZpeGVkRWxlbWVudFRoYXRIaWRlc01lbnVcblxuICAgICAgICBpZihnZXRQYWdlU2Nyb2xsUG9zaXRpb25Ub3AoKSA+PSByZWZQb3NpdGlvbkZvckZpeGVkTWVudSAmJiAhYm9keS5jbGFzc0xpc3QuY29udGFpbnMoRklYRURfTUVOVV9DTEFTU19OQU1FKSl7XG4gICAgICAgICAgICBib2R5LmNsYXNzTGlzdC5hZGQoRklYRURfTUVOVV9DTEFTU19OQU1FKVxuICAgICAgICB9IGVsc2UgaWYgKGdldFBhZ2VTY3JvbGxQb3NpdGlvblRvcCgpIDw9IHJlZlBvc2l0aW9uRm9yRml4ZWRNZW51ICYmIGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKEZJWEVEX01FTlVfQ0xBU1NfTkFNRSkpIHtcbiAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZShGSVhFRF9NRU5VX0NMQVNTX05BTUUpXG4gICAgICAgIH1cblxuICAgIH0pXG59XG4iLCJpbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi4vSFRNTF9TRUxFQ1RPUlNcIlxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3VycmVudFNlY3Rpb25OYW1lKCkge1xuICAgIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEhUTUxfU0VMRUNUT1JTLkNVUlJFTlRfU0VDVElPTl9OQU1FKSBhcyBIVE1MRWxlbWVudCkuaW5uZXJIVE1MID0gZ2V0Q3VycmVudFNlY3Rpb25OYW1lKClcbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudFNlY3Rpb25OYW1lKCk6IHN0cmluZyB7XG4gICAgY29uc3QgcGFnZVRpdGxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMVwiKVxuICAgIGlmKHBhZ2VUaXRsZUVsZW1lbnQgIT09IG51bGwgKSB7XG4gICAgICAgIHJldHVybiBwYWdlVGl0bGVFbGVtZW50LmlubmVySFRNTFxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcIlwiXG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==