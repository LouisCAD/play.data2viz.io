!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){},function(e,t,n){e.exports=n.p+"images/logo-play.png"},function(e,t,n){e.exports=n.p+"images/logo-negative.png"},function(e,t,n){e.exports=n.p+"images/go-back-to-main-page.png"},function(e,t,n){e.exports=n.p+"images/logo-play-io_all_min-color_variation-v3.png"},function(e,t,n){"use strict";function o(e){let t=!1;window.addEventListener("scroll",n=>{t||window.requestAnimationFrame(()=>{e(),t=!1}),t=!0})}function i(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var r;function s(e){let t=!0;for(const n of e)n.isActive&&t?(t=!1,n.classname="active"):n.classname="unactive"}n.r(t),function(e){e.CODE_AREA=".code-area",e.CONTENT="#d2v-content",e.CURRENT_SECTION_NAME="#current-section-name",e.TOP_HEADER="#d2v-header",e.NAVIGATION_MENU="#site-navigation"}(r||(r={}));class c{constructor(e,t){this._element=e,this._elementInMenu=this.getElementInMenu(t)}get isActive(){return this._element.getBoundingClientRect().top<=window.innerHeight/2}set classname(e){"active"===e?this._elementInMenuContainsActiveClass||this._elementInMenu.classList.add("active"):this._elementInMenuContainsActiveClass&&this._elementInMenu.classList.remove("active")}getElementInMenu(e){const t=document.querySelectorAll(`${r.NAVIGATION_MENU} > li > ul > li > a`);for(const e of t)if(e.getAttribute("href")==="#"+this._element.getAttribute("id"))return e}get _elementInMenuContainsActiveClass(){return void 0!==this._elementInMenu&&this._elementInMenu.classList.contains("active")}}class u{constructor(e){this._editors=[],this._editors=e,this._setListenerForEditorsAutoExecution()}runVisibleEditors(){for(const e of this._editors)e.isOnScreen&&e.hasNotBeenExecuted&&e.execute()}_setListenerForEditorsAutoExecution(){o(()=>{this.runVisibleEditors()})}}function l(e,t,n){const o=document.createElement(e);if("string"==typeof t)o.innerHTML=t;else if(t)for(const e of t)o.appendChild(e);return n&&(o.className=n),o}class a{constructor(e){this.MORE_THAN_ONCE_CODE_CHANGED_CLASSNAME="more-than-once-code-changed",this.SHORTCUT_INFO_CLASSNAME="shortcut-info compiler-info",this._hasBeenExecuted=!1,this._eventFunctions={getInstance:e=>{this._KotlinPlaygroundEditor=e},onChange:e=>{this.changedCounter++,2===this.changedCounter&&this.kotlinEditorContainer&&(this.kotlinEditorContainer.appendChild(l("div",[l("div","CTRL + R : run"),l("div","CTRL + SPACE : code completion")],this.SHORTCUT_INFO_CLASSNAME)),this.kotlinEditorContainer.classList.add(this.MORE_THAN_ONCE_CODE_CHANGED_CLASSNAME))}},this.changedCounter=0,this._selector=e}init(){return new Promise(e=>{KotlinPlayground(this._selector,this._eventFunctions).then(()=>{if(this._KotlinPlaygroundEditor){this._kotlinEditorContainer=this._KotlinPlaygroundEditor.nodes[0];const e=this._kotlinEditorContainer.querySelector(r.CODE_AREA);null!==e&&e instanceof HTMLElement&&(this._codeArea=e)}e(this)})})}get kotlinEditorContainer(){return this._kotlinEditorContainer}get codeArea(){return this._codeArea}get bottom_of_codeArea_is_above_bottom_of_screen(){return!!this.codeArea&&this.codeArea.getBoundingClientRect().bottom>=0}get bottom_of_codeArea_is_below_top_of_screen(){return!!this.codeArea&&this.codeArea.getBoundingClientRect().bottom<=window.innerHeight}get hasNotBeenExecuted(){return!this._hasBeenExecuted}get isOnScreen(){if(this._KotlinPlaygroundEditor)return this.bottom_of_codeArea_is_above_bottom_of_screen&&this.bottom_of_codeArea_is_below_top_of_screen}execute(){return new Promise((e,t)=>{this._KotlinPlaygroundEditor&&(this._hasBeenExecuted=!0,this._KotlinPlaygroundEditor.execute()),e(),t(new Error("can't execute kotlin playground editor"))})}}new Promise(e=>{const t=document.querySelectorAll(".kotlin-code"),n=[];let o=0;for(const e of t)e instanceof HTMLElement&&n.push(new a(e));for(const t of n)t.init().then(()=>{++o===n.length&&e(new u(n))})}).then(e=>{e.runVisibleEditors()}),function(e,t){const n=document.body,r=void 0===t?0:t.getBoundingClientRect().height;o(()=>{const t=parseInt(window.getComputedStyle(e).paddingTop)-r;i()>=t&&!n.classList.contains("menu-fixed")?n.classList.add("menu-fixed"):i()<=t&&n.classList.contains("menu-fixed")&&n.classList.remove("menu-fixed")})}(document.querySelector(r.CONTENT),document.querySelector(r.TOP_HEADER)),document.querySelector(r.CURRENT_SECTION_NAME).innerHTML=function(){const e=document.querySelector("h1");return null!==e?e.innerHTML:""}(),new Promise((e,t)=>{const n=[],o=document.querySelectorAll(`${r.CONTENT} h2`),i=document.querySelector(`${r.NAVIGATION_MENU}`);for(const e of o)n.push(new c(e,i));e(n.reverse()),t(new Error("can't get list of level two in navigation menu"))}).then(e=>{s(e),o(()=>{s(e)})});n(0),n(1),n(2),n(3),n(4)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9sb2dvLXBsYXkucG5nIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvbG9nby1uZWdhdGl2ZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9nby1iYWNrLXRvLW1haW4tcGFnZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9sb2dvLXBsYXktaW9fYWxsX21pbi1jb2xvcl92YXJpYXRpb24tdjMucG5nIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2FkZFNjcm9sbEV2ZW50TGlzdGVuZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL0hUTUxfU0VMRUNUT1JTLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL25hdmlnYXRpb24vc2V0TmF2aWdhdGlvbk1lbnUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZWRpdG9yL0VkaXRvck1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvdG9vbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZWRpdG9yL0VkaXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lZGl0b3Ivc2V0RWRpdG9yc01hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9uYXZpZ2F0aW9uL3NldE1lbnVQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9uYXZpZ2F0aW9uL3NldEN1cnJlbnRTZWN0aW9uTmFtZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFkZFNjcm9sbEV2ZW50TGlzdGVuZXIiLCJmdW4iLCJ0aWNraW5nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wIiwidW5kZWZpbmVkIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImJvZHkiLCJwYXJlbnROb2RlIiwic2Nyb2xsVG9wIiwiSFRNTF9TRUxFQ1RPUlMiLCJ1cGRhdGVDaGFwdGVyU3RhdHVJbk5hdmlnYXRpb25NZW51IiwibGlzdE9mVGl0bGVMZXZlbFR3byIsImxhc3RUaXRsZUlzTm90Rm91bmQiLCJ0aXRsZUxldmVsVHdvIiwiaXNBY3RpdmUiLCJjbGFzc25hbWUiLCJzZXROYXZpZ2F0aW9uTWVudV9DaGFwdGVyIiwiW29iamVjdCBPYmplY3RdIiwiZWxlbWVudCIsIm5hdmlnYXRpb25NZW51RWxlbWVudCIsInRoaXMiLCJfZWxlbWVudCIsIl9lbGVtZW50SW5NZW51IiwiZ2V0RWxlbWVudEluTWVudSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImlubmVySGVpZ2h0IiwiX2VsZW1lbnRJbk1lbnVDb250YWluc0FjdGl2ZUNsYXNzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibGlzdE9mTGV2ZWxUd29Jbk1lbnUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiTkFWSUdBVElPTl9NRU5VIiwibGV2ZWxUd29FbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiY29udGFpbnMiLCJFZGl0b3JNYW5hZ2VyX0VkaXRvck1hbmFnZXIiLCJrb3RsaW5FZGl0b3JzIiwiX2VkaXRvcnMiLCJfc2V0TGlzdGVuZXJGb3JFZGl0b3JzQXV0b0V4ZWN1dGlvbiIsImVkaXRvciIsImlzT25TY3JlZW4iLCJoYXNOb3RCZWVuRXhlY3V0ZWQiLCJleGVjdXRlIiwicnVuVmlzaWJsZUVkaXRvcnMiLCJjcmVhdGVIVE1MRWxlbWVudCIsInRhZ05hbWUiLCJjb250ZW50IiwibmV3RWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJodG1sRWxlbWVudCIsImFwcGVuZENoaWxkIiwiY2xhc3NOYW1lIiwiRWRpdG9yX0VkaXRvciIsInNlbGVjdG9yIiwiTU9SRV9USEFOX09OQ0VfQ09ERV9DSEFOR0VEX0NMQVNTTkFNRSIsIlNIT1JUQ1VUX0lORk9fQ0xBU1NOQU1FIiwiX2hhc0JlZW5FeGVjdXRlZCIsIl9ldmVudEZ1bmN0aW9ucyIsImdldEluc3RhbmNlIiwiX0tvdGxpblBsYXlncm91bmRFZGl0b3IiLCJvbkNoYW5nZSIsImNvZGUiLCJjaGFuZ2VkQ291bnRlciIsImtvdGxpbkVkaXRvckNvbnRhaW5lciIsIl9zZWxlY3RvciIsIlByb21pc2UiLCJyZXNvbHZlIiwiS290bGluUGxheWdyb3VuZCIsInRoZW4iLCJfa290bGluRWRpdG9yQ29udGFpbmVyIiwibm9kZXMiLCJjb2RlQXJlYSIsInF1ZXJ5U2VsZWN0b3IiLCJDT0RFX0FSRUEiLCJIVE1MRWxlbWVudCIsIl9jb2RlQXJlYSIsImJvdHRvbV9vZl9jb2RlQXJlYV9pc19hYm92ZV9ib3R0b21fb2Zfc2NyZWVuIiwiYm90dG9tIiwiYm90dG9tX29mX2NvZGVBcmVhX2lzX2JlbG93X3RvcF9vZl9zY3JlZW4iLCJyZWplY3QiLCJFcnJvciIsImNvZGVFbGVtZW50c0ZvcktvdGxpblBsYXlncm91bmRFZGl0b3JJbml0IiwibGlzdE9mRWRpdG9yIiwibnVtYmVyT2ZFZGl0b3JzSW5pdGlhbGlzZWQiLCJjb2RlRWxlbWVudCIsInB1c2giLCJpbml0IiwibGVuZ3RoIiwiZWRpdG9yTWFuYWdlciIsInJlZmVyZW5jZUVsZW1lbnRGb3JGaXhlZE1lbnUiLCJ0b3BFbGVtZW50Rml4ZWRPdmVyTWVudSIsImhlaWdodE9mRml4ZWRFbGVtZW50VGhhdEhpZGVzTWVudSIsImhlaWdodCIsInJlZlBvc2l0aW9uRm9yRml4ZWRNZW51IiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFkZGluZ1RvcCIsInNldE1lbnVQb3NpdGlvbiIsIkNPTlRFTlQiLCJUT1BfSEVBREVSIiwiQ1VSUkVOVF9TRUNUSU9OX05BTUUiLCJwYWdlVGl0bGVFbGVtZW50IiwiZ2V0Q3VycmVudFNlY3Rpb25OYW1lIiwibGlzdFRvUmV0dXJuIiwiVElUTEVfVFdPX0VMRU1FTlRTIiwiTkFWSUdBVElPTl9NRU5VX0VMRU1FTlQiLCJuYXZpZ2F0aW9uVHdvRWxlbWVudCIsInJldmVyc2UiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFD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QUtzQixVQUFVQyxJQWJPLGNBY2Y1QixLQUE4QitGLEdBQTJCMUYsRUFBS3NCLFVBQVVRLFNBZHpELGVBZXRCOUIsRUFBS3NCLFVBQVVFLE9BZk8sZ0JER2xDc0UsQ0FDSWhHLFNBQVN1RSxjQUFjbEUsRUFBZTRGLFNBQ3RDakcsU0FBU3VFLGNBQWNsRSxFQUFlNkYsYUVUckNsRyxTQUFTdUUsY0FBY2xFLEVBQWU4RixzQkFBc0NwRCxVQUdqRixXQUNJLE1BQU1xRCxFQUFtQnBHLFNBQVN1RSxjQUFjLE1BQ2hELE9BQXdCLE9BQXJCNkIsRUFDUUEsRUFBaUJyRCxVQUVqQixHQVI4RXNELEdQd0JsRixJQUFJckMsUUFBUSxDQUFDQyxFQUFTYSxLQUN6QixNQUFNd0IsS0FFQUMsRUFBcUJ2RyxTQUFTNEIsb0JBQW9CdkIsRUFBZTRGLGNBQ2pFTyxFQUEwQnhHLFNBQVN1RSxpQkFBaUJsRSxFQUFld0IsbUJBRXpFLElBQUksTUFBTTRFLEtBQXdCRixFQUM5QkQsRUFBYWxCLEtBQUssSUFBSXhFLEVBQVE2RixFQUFzQkQsSUFHeER2QyxFQUFRcUMsRUFBYUksV0FFckI1QixFQUFPLElBQUlDLE1BQU0scURBbkNHWixLQUFNNUYsSUFDMUIrQixFQUFtQy9CLEdBRW5DZSxFQUF1QixLQUNuQmdCLEVBQW1DL0IiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9sb2dvLXBsYXkucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2xvZ28tbmVnYXRpdmUucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2dvLWJhY2stdG8tbWFpbi1wYWdlLnBuZ1wiOyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9sb2dvLXBsYXktaW9fYWxsX21pbi1jb2xvcl92YXJpYXRpb24tdjMucG5nXCI7IiwiZXhwb3J0IGZ1bmN0aW9uIGFkZFNjcm9sbEV2ZW50TGlzdGVuZXIoZnVuOiAoKSA9PiB2b2lkKSB7XG4gICAgbGV0IHRpY2tpbmcgPSBmYWxzZVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIChldikgPT4ge1xuICAgICAgICBpZighdGlja2luZykge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZnVuKClcbiAgICAgICAgICAgICAgICB0aWNraW5nID0gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgdGlja2luZyA9IHRydWVcbiAgICB9KVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldFBhZ2VTY3JvbGxQb3NpdGlvblRvcCgpOiBudW1iZXIge1xuICAgIHJldHVybiAod2luZG93LnBhZ2VZT2Zmc2V0ICE9PSB1bmRlZmluZWQpID8gd2luZG93LnBhZ2VZT2Zmc2V0IDogKChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlIHx8IGRvY3VtZW50LmJvZHkpIGFzIEhUTUxFbGVtZW50KS5zY3JvbGxUb3Bcbn0iLCJleHBvcnQgZW51bSBIVE1MX1NFTEVDVE9SUyB7XG4gICAgQ09ERV9BUkVBICAgICAgICAgICAgICAgPSBcIi5jb2RlLWFyZWFcIixcbiAgICBDT05URU5UICAgICAgICAgICAgICAgICA9IFwiI2Qydi1jb250ZW50XCIsXG4gICAgQ1VSUkVOVF9TRUNUSU9OX05BTUUgICAgPSBcIiNjdXJyZW50LXNlY3Rpb24tbmFtZVwiLFxuICAgIFRPUF9IRUFERVIgICAgICAgICAgICAgID0gXCIjZDJ2LWhlYWRlclwiLFxuICAgIE5BVklHQVRJT05fTUVOVSAgICAgICAgID0gXCIjc2l0ZS1uYXZpZ2F0aW9uXCJcbn0iLCJpbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi4vSFRNTF9TRUxFQ1RPUlNcIlxuaW1wb3J0IHthZGRTY3JvbGxFdmVudExpc3RlbmVyfSBmcm9tIFwiLi4vYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lclwiXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXROYXZpZ2F0aW9uTWVudSgpIHtcbiAgICBnZW5lcmF0ZUxpc3RPZkNoYXB0ZXIoKS50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICB1cGRhdGVDaGFwdGVyU3RhdHVJbk5hdmlnYXRpb25NZW51KHZhbHVlKVxuXG4gICAgICAgIGFkZFNjcm9sbEV2ZW50TGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlQ2hhcHRlclN0YXR1SW5OYXZpZ2F0aW9uTWVudSh2YWx1ZSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5mdW5jdGlvbiB1cGRhdGVDaGFwdGVyU3RhdHVJbk5hdmlnYXRpb25NZW51KGxpc3RPZlRpdGxlTGV2ZWxUd286IENoYXB0ZXJbXSkge1xuICAgIGxldCBsYXN0VGl0bGVJc05vdEZvdW5kID0gdHJ1ZVxuXG4gICAgZm9yKGNvbnN0IHRpdGxlTGV2ZWxUd28gb2YgbGlzdE9mVGl0bGVMZXZlbFR3bykge1xuICAgICAgICBpZih0aXRsZUxldmVsVHdvLmlzQWN0aXZlICYmIGxhc3RUaXRsZUlzTm90Rm91bmQpIHtcbiAgICAgICAgICAgIGxhc3RUaXRsZUlzTm90Rm91bmQgPSBmYWxzZVxuICAgICAgICAgICAgdGl0bGVMZXZlbFR3by5jbGFzc25hbWUgPSBcImFjdGl2ZVwiXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aXRsZUxldmVsVHdvLmNsYXNzbmFtZSA9IFwidW5hY3RpdmVcIlxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUxpc3RPZkNoYXB0ZXIoKTogUHJvbWlzZTxDaGFwdGVyW10+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBsaXN0VG9SZXR1cm4gPSBbXVxuXG4gICAgICAgIGNvbnN0IFRJVExFX1RXT19FTEVNRU5UUyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7SFRNTF9TRUxFQ1RPUlMuQ09OVEVOVH0gaDJgKSBhcyBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PlxuICAgICAgICBjb25zdCBOQVZJR0FUSU9OX01FTlVfRUxFTUVOVCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7SFRNTF9TRUxFQ1RPUlMuTkFWSUdBVElPTl9NRU5VfWApIGFzIEhUTUxFbGVtZW50XG5cbiAgICAgICAgZm9yKGNvbnN0IG5hdmlnYXRpb25Ud29FbGVtZW50IG9mIFRJVExFX1RXT19FTEVNRU5UUykge1xuICAgICAgICAgICAgbGlzdFRvUmV0dXJuLnB1c2gobmV3IENoYXB0ZXIobmF2aWdhdGlvblR3b0VsZW1lbnQsIE5BVklHQVRJT05fTUVOVV9FTEVNRU5UKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc29sdmUobGlzdFRvUmV0dXJuLnJldmVyc2UoKSlcblxuICAgICAgICByZWplY3QobmV3IEVycm9yKFwiY2FuJ3QgZ2V0IGxpc3Qgb2YgbGV2ZWwgdHdvIGluIG5hdmlnYXRpb24gbWVudVwiKSlcbiAgICB9KVxufVxuXG5jbGFzcyBDaGFwdGVyIHtcbiAgICBwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudFxuXG4gICAgcHJpdmF0ZSBfZWxlbWVudEluTWVudTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWRcblxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBuYXZpZ2F0aW9uTWVudUVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50XG4gICAgICAgIHRoaXMuX2VsZW1lbnRJbk1lbnUgPSB0aGlzLmdldEVsZW1lbnRJbk1lbnUobmF2aWdhdGlvbk1lbnVFbGVtZW50KVxuICAgIH1cblxuICAgIGdldCBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIDw9IHdpbmRvdy5pbm5lckhlaWdodCAvIDJcbiAgICB9XG5cbiAgICBzZXQgY2xhc3NuYW1lKGNsYXNzbmFtZTogXCJhY3RpdmVcInxcInVuYWN0aXZlXCIpIHtcbiAgICAgICAgaWYoY2xhc3NuYW1lID09PSBcImFjdGl2ZVwiKSB7XG4gICAgICAgICAgICBpZighIHRoaXMuX2VsZW1lbnRJbk1lbnVDb250YWluc0FjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgKHRoaXMuX2VsZW1lbnRJbk1lbnUgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHRoaXMuX2VsZW1lbnRJbk1lbnVDb250YWluc0FjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgKHRoaXMuX2VsZW1lbnRJbk1lbnUgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RWxlbWVudEluTWVudShuYXZpZ2F0aW9uTWVudUVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGxpc3RPZkxldmVsVHdvSW5NZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHtIVE1MX1NFTEVDVE9SUy5OQVZJR0FUSU9OX01FTlV9ID4gbGkgPiB1bCA+IGxpID4gYWApIGFzIE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+XG5cbiAgICAgICAgZm9yKGNvbnN0IGxldmVsVHdvRWxlbWVudCBvZiBsaXN0T2ZMZXZlbFR3b0luTWVudSkge1xuICAgICAgICAgICAgaWYobGV2ZWxUd29FbGVtZW50LmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiICsgdGhpcy5fZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsZXZlbFR3b0VsZW1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IF9lbGVtZW50SW5NZW51Q29udGFpbnNBY3RpdmVDbGFzcygpIHtcbiAgICAgICAgaWYodGhpcy5fZWxlbWVudEluTWVudSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudEluTWVudS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtLb3RsaW5QbGF5Z3JvdW5kfSBmcm9tIFwiLi9Lb3RsaW5QbGF5Z3JvdW5kXCJcbmltcG9ydCB7RWRpdG9yfSBmcm9tIFwiLi9FZGl0b3JcIlxuaW1wb3J0IHthZGRTY3JvbGxFdmVudExpc3RlbmVyfSBmcm9tIFwiLi4vYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lclwiXG5pbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi4vSFRNTF9TRUxFQ1RPUlNcIlxuXG5leHBvcnQgY2xhc3MgRWRpdG9yTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3Ioa290bGluRWRpdG9yczogRWRpdG9yW10pIHtcblxuICAgICAgICB0aGlzLl9lZGl0b3JzID0ga290bGluRWRpdG9yc1xuXG4gICAgICAgIHRoaXMuX3NldExpc3RlbmVyRm9yRWRpdG9yc0F1dG9FeGVjdXRpb24oKVxuICAgIH1cblxuICAgIHB1YmxpYyBydW5WaXNpYmxlRWRpdG9ycygpIHtcbiAgICAgICAgZm9yKGNvbnN0IGVkaXRvciBvZiB0aGlzLl9lZGl0b3JzKSB7XG4gICAgICAgICAgICBpZihlZGl0b3IuaXNPblNjcmVlbiAmJiBlZGl0b3IuaGFzTm90QmVlbkV4ZWN1dGVkKSB7XG4gICAgICAgICAgICAgICAgZWRpdG9yLmV4ZWN1dGUoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZWRpdG9yczogRWRpdG9yW10gPSBbXVxuXG4gICAgcHJpdmF0ZSBfc2V0TGlzdGVuZXJGb3JFZGl0b3JzQXV0b0V4ZWN1dGlvbigpIHtcbiAgICAgICAgYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJ1blZpc2libGVFZGl0b3JzKClcbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlSFRNTEVsZW1lbnQodGFnTmFtZToga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwLCBjb250ZW50Pzogc3RyaW5nIHwgSFRNTEVsZW1lbnRbXSwgY2xhc3NuYW1lPzogc3RyaW5nKSB7XG4gICAgY29uc3QgbmV3RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSlcblxuICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IGNvbnRlbnRcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgZm9yKGNvbnN0IGh0bWxFbGVtZW50IG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQuYXBwZW5kQ2hpbGQoaHRtbEVsZW1lbnQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZihjbGFzc25hbWUpIG5ld0VsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NuYW1lXG5cbiAgICByZXR1cm4gbmV3RWxlbWVudFxufSIsImltcG9ydCB7S290bGluUGxheWdyb3VuZH0gZnJvbSBcIi4vS290bGluUGxheWdyb3VuZFwiXG5pbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi4vSFRNTF9TRUxFQ1RPUlNcIlxuaW1wb3J0IHtjcmVhdGVIVE1MRWxlbWVudH0gZnJvbSBcIi4uL3Rvb2xzXCJcblxuZGVjbGFyZSBmdW5jdGlvbiBLb3RsaW5QbGF5Z3JvdW5kKHNlbGVjdG9yOiBzdHJpbmcgfMKgSFRNTEVsZW1lbnQsIGV2ZW50RnVuY3Rpb25zPzogS290bGluUGxheWdyb3VuZC5JRXZlbnRGdW5jdGlvbnMpOiBQcm9taXNlPEtvdGxpblBsYXlncm91bmQuSUVkaXRvcltdPlxuXG5leHBvcnQgY2xhc3MgRWRpdG9yIHtcbiAgICBwcml2YXRlIE1PUkVfVEhBTl9PTkNFX0NPREVfQ0hBTkdFRF9DTEFTU05BTUUgPSBcIm1vcmUtdGhhbi1vbmNlLWNvZGUtY2hhbmdlZFwiXG4gICAgcHJpdmF0ZSBTSE9SVENVVF9JTkZPX0NMQVNTTkFNRSA9IFwic2hvcnRjdXQtaW5mbyBjb21waWxlci1pbmZvXCJcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBzZWxlY3Rvcjogc3RyaW5nIHwgSFRNTEVsZW1lbnQsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3JcbiAgICB9XG5cbiAgICBwcml2YXRlIF9zZWxlY3Rvcjogc3RyaW5nIHwgSFRNTEVsZW1lbnRcblxuICAgIHB1YmxpYyBpbml0KCk6IFByb21pc2U8RWRpdG9yPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIEtvdGxpblBsYXlncm91bmQodGhpcy5fc2VsZWN0b3IsIHRoaXMuX2V2ZW50RnVuY3Rpb25zKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLl9Lb3RsaW5QbGF5Z3JvdW5kRWRpdG9yKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa290bGluRWRpdG9yQ29udGFpbmVyID0gdGhpcy5fS290bGluUGxheWdyb3VuZEVkaXRvci5ub2Rlc1swXVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZGVBcmVhID0gdGhpcy5fa290bGluRWRpdG9yQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuQ09ERV9BUkVBKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvZGVBcmVhICE9PSBudWxsICYmIGNvZGVBcmVhIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvZGVBcmVhID0gY29kZUFyZWFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc29sdmUoIHRoaXMgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcml2YXRlIF9rb3RsaW5FZGl0b3JDb250YWluZXI/OiBIVE1MRWxlbWVudFxuICAgIGdldCBrb3RsaW5FZGl0b3JDb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rb3RsaW5FZGl0b3JDb250YWluZXJcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jb2RlQXJlYT86IEhUTUxFbGVtZW50XG4gICAgcHVibGljIGdldCBjb2RlQXJlYSgpIHtyZXR1cm4gdGhpcy5fY29kZUFyZWF9XG5cbiAgICBwdWJsaWMgZ2V0IGJvdHRvbV9vZl9jb2RlQXJlYV9pc19hYm92ZV9ib3R0b21fb2Zfc2NyZWVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2RlQXJlYSA/IHRoaXMuY29kZUFyZWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tID49IDAgOiBmYWxzZVxuICAgIH1cbiAgICBwdWJsaWMgZ2V0IGJvdHRvbV9vZl9jb2RlQXJlYV9pc19iZWxvd190b3Bfb2Zfc2NyZWVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2RlQXJlYSA/IHRoaXMuY29kZUFyZWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIDw9IHdpbmRvdy5pbm5lckhlaWdodCA6IGZhbHNlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFzQmVlbkV4ZWN1dGVkID0gZmFsc2VcbiAgICBwdWJsaWMgZ2V0IGhhc05vdEJlZW5FeGVjdXRlZCgpIHsgcmV0dXJuICF0aGlzLl9oYXNCZWVuRXhlY3V0ZWR9XG5cbiAgICBwdWJsaWMgZ2V0IGlzT25TY3JlZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLl9Lb3RsaW5QbGF5Z3JvdW5kRWRpdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib3R0b21fb2ZfY29kZUFyZWFfaXNfYWJvdmVfYm90dG9tX29mX3NjcmVlbiAmJiB0aGlzLmJvdHRvbV9vZl9jb2RlQXJlYV9pc19iZWxvd190b3Bfb2Zfc2NyZWVuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZXhlY3V0ZSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYoIHRoaXMuX0tvdGxpblBsYXlncm91bmRFZGl0b3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYXNCZWVuRXhlY3V0ZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgdGhpcy5fS290bGluUGxheWdyb3VuZEVkaXRvci5leGVjdXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImNhbid0IGV4ZWN1dGUga290bGluIHBsYXlncm91bmQgZWRpdG9yXCIpKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9ldmVudEZ1bmN0aW9uczogS290bGluUGxheWdyb3VuZC5JRXZlbnRGdW5jdGlvbnMgPSB7XG4gICAgICAgIGdldEluc3RhbmNlOiAoZWRpdG9yOiBLb3RsaW5QbGF5Z3JvdW5kLklFZGl0b3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX0tvdGxpblBsYXlncm91bmRFZGl0b3IgPSBlZGl0b3JcbiAgICAgICAgfSxcbiAgICAgICAgb25DaGFuZ2U6IChjb2RlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZENvdW50ZXIrK1xuXG4gICAgICAgICAgICBpZih0aGlzLmNoYW5nZWRDb3VudGVyID09PSAyKSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5rb3RsaW5FZGl0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rb3RsaW5FZGl0b3JDb250YWluZXIuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVIVE1MRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlSFRNTEVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDVFJMICsgUiA6IHJ1blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUhUTUxFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ1RSTCArIFNQQUNFIDogY29kZSBjb21wbGV0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5TSE9SVENVVF9JTkZPX0NMQVNTTkFNRVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rb3RsaW5FZGl0b3JDb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLk1PUkVfVEhBTl9PTkNFX0NPREVfQ0hBTkdFRF9DTEFTU05BTUUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG5cbiAgICBwcml2YXRlIF9Lb3RsaW5QbGF5Z3JvdW5kRWRpdG9yPzogS290bGluUGxheWdyb3VuZC5JRWRpdG9yXG5cbiAgICBwcml2YXRlIGNoYW5nZWRDb3VudGVyID0gMFxufSIsImltcG9ydCB7S290bGluUGxheWdyb3VuZH0gZnJvbSBcIi4vS290bGluUGxheWdyb3VuZFwiXG5pbXBvcnQge0VkaXRvck1hbmFnZXJ9IGZyb20gXCIuL0VkaXRvck1hbmFnZXJcIlxuaW1wb3J0IHtFZGl0b3J9IGZyb20gXCIuL0VkaXRvclwiXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRFZGl0b3JzTWFuYWdlcigpOiBQcm9taXNlPEVkaXRvck1hbmFnZXI+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IGNvZGVFbGVtZW50c0ZvcktvdGxpblBsYXlncm91bmRFZGl0b3JJbml0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtvdGxpbi1jb2RlJylcblxuICAgICAgICBjb25zdCBsaXN0T2ZFZGl0b3I6IEVkaXRvcltdID0gW11cblxuICAgICAgICBsZXQgbnVtYmVyT2ZFZGl0b3JzSW5pdGlhbGlzZWQgPSAwXG5cbiAgICAgICAgZm9yKGNvbnN0IGNvZGVFbGVtZW50IG9mIGNvZGVFbGVtZW50c0ZvcktvdGxpblBsYXlncm91bmRFZGl0b3JJbml0KSB7XG4gICAgICAgICAgICBpZihjb2RlRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgbGlzdE9mRWRpdG9yLnB1c2gobmV3IEVkaXRvcihjb2RlRWxlbWVudCkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IoY29uc3QgZWRpdG9yIG9mIGxpc3RPZkVkaXRvcikge1xuICAgICAgICAgICAgZWRpdG9yLmluaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBudW1iZXJPZkVkaXRvcnNJbml0aWFsaXNlZCsrXG4gICAgICAgICAgICAgICAgaWYobnVtYmVyT2ZFZGl0b3JzSW5pdGlhbGlzZWQgPT09IGxpc3RPZkVkaXRvci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBFZGl0b3JNYW5hZ2VyKGxpc3RPZkVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufVxuIiwiaW1wb3J0IHtzZXRNZW51UG9zaXRpb259IGZyb20gXCIuL25hdmlnYXRpb24vc2V0TWVudVBvc2l0aW9uXCJcbmltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuL0hUTUxfU0VMRUNUT1JTXCJcbmltcG9ydCB7c2V0Q3VycmVudFNlY3Rpb25OYW1lfSBmcm9tIFwiLi9uYXZpZ2F0aW9uL3NldEN1cnJlbnRTZWN0aW9uTmFtZVwiXG5pbXBvcnQge3NldE5hdmlnYXRpb25NZW51fSBmcm9tIFwiLi9uYXZpZ2F0aW9uL3NldE5hdmlnYXRpb25NZW51XCJcbmltcG9ydCB7c2V0RWRpdG9yc01hbmFnZXJ9IGZyb20gXCIuL2VkaXRvci9zZXRFZGl0b3JzTWFuYWdlclwiXG5cbnNldEVkaXRvcnNNYW5hZ2VyKCkudGhlbigoZWRpdG9yTWFuYWdlcikgPT4ge1xuICAgIGVkaXRvck1hbmFnZXIucnVuVmlzaWJsZUVkaXRvcnMoKVxufSlcblxuc2V0TWVudVBvc2l0aW9uKFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuQ09OVEVOVCkgYXMgSFRNTEVsZW1lbnQsXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihIVE1MX1NFTEVDVE9SUy5UT1BfSEVBREVSKSBhcyBIVE1MRWxlbWVudCxcbilcblxuXG5zZXRDdXJyZW50U2VjdGlvbk5hbWUoKVxuXG5zZXROYXZpZ2F0aW9uTWVudSgpIiwiaW1wb3J0IHthZGRTY3JvbGxFdmVudExpc3RlbmVyfSBmcm9tIFwiLi4vYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lclwiXG5pbXBvcnQge2dldFBhZ2VTY3JvbGxQb3NpdGlvblRvcH0gZnJvbSBcIi4uL2dldFBhZ2VTY3JvbGxQb3NpdGlvblRvcFwiXG5pbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi4vSFRNTF9TRUxFQ1RPUlNcIlxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRNZW51UG9zaXRpb24ocmVmZXJlbmNlRWxlbWVudEZvckZpeGVkTWVudTogSFRNTEVsZW1lbnQsIHRvcEVsZW1lbnRGaXhlZE92ZXJNZW51PzogSFRNTEVsZW1lbnQpIHtcblxuICAgIGNvbnN0IEZJWEVEX01FTlVfQ0xBU1NfTkFNRSA9IFwibWVudS1maXhlZFwiXG5cbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keVxuXG4gICAgY29uc3QgaGVpZ2h0T2ZGaXhlZEVsZW1lbnRUaGF0SGlkZXNNZW51ID0gdG9wRWxlbWVudEZpeGVkT3Zlck1lbnUgPT09IHVuZGVmaW5lZCA/ICAwIDogdG9wRWxlbWVudEZpeGVkT3Zlck1lbnUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0XG5cbiAgICBhZGRTY3JvbGxFdmVudExpc3RlbmVyKCgpID0+IHtcblxuICAgICAgICBjb25zdCBwb3NpdGlvblRvcE9mUmVmRWxlbWVudCA9IHBhcnNlSW50KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyZWZlcmVuY2VFbGVtZW50Rm9yRml4ZWRNZW51KS5wYWRkaW5nVG9wIGFzIHN0cmluZyApXG5cbiAgICAgICAgY29uc3QgcmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUgPSBwb3NpdGlvblRvcE9mUmVmRWxlbWVudCAtIGhlaWdodE9mRml4ZWRFbGVtZW50VGhhdEhpZGVzTWVudVxuXG4gICAgICAgIGlmKGdldFBhZ2VTY3JvbGxQb3NpdGlvblRvcCgpID49IHJlZlBvc2l0aW9uRm9yRml4ZWRNZW51ICYmICFib2R5LmNsYXNzTGlzdC5jb250YWlucyhGSVhFRF9NRU5VX0NMQVNTX05BTUUpKXtcbiAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZChGSVhFRF9NRU5VX0NMQVNTX05BTUUpXG4gICAgICAgIH0gZWxzZSBpZiAoZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wKCkgPD0gcmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoRklYRURfTUVOVV9DTEFTU19OQU1FKSkge1xuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKEZJWEVEX01FTlVfQ0xBU1NfTkFNRSlcbiAgICAgICAgfVxuXG4gICAgfSlcbn1cbiIsImltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuLi9IVE1MX1NFTEVDVE9SU1wiXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U2VjdGlvbk5hbWUoKSB7XG4gICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuQ1VSUkVOVF9TRUNUSU9OX05BTUUpIGFzIEhUTUxFbGVtZW50KS5pbm5lckhUTUwgPSBnZXRDdXJyZW50U2VjdGlvbk5hbWUoKVxufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50U2VjdGlvbk5hbWUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYWdlVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgxXCIpXG4gICAgaWYocGFnZVRpdGxlRWxlbWVudCAhPT0gbnVsbCApIHtcbiAgICAgICAgcmV0dXJuIHBhZ2VUaXRsZUVsZW1lbnQuaW5uZXJIVE1MXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9